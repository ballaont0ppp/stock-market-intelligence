{
  "timestamp": "2025-11-19T00:47:06.258147",
  "test_suites": {
    "unit_tests": {
      "status": "FAILED",
      "output": "============================= test session starts =============================\nplatform win32 -- Python 3.10.10, pytest-8.3.3, pluggy-1.5.0 -- C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\python.exe\ncachedir: .pytest_cache\nbenchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)\nPyQt6 6.9.1 -- Qt runtime 6.9.1 -- Qt compiled 6.9.0\nrootdir: d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\nconfigfile: pytest.ini\nplugins: anyio-4.9.0, dash-3.3.0, logfire-4.4.0, asyncio-1.0.0, benchmark-5.1.0, cov-5.0.0, flask-1.3.0, mock-3.15.1, qt-4.5.0\nasyncio: mode=strict, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollecting ... collected 69 items\n\ntests/test_models/test_holdings.py::TestHoldingsModel::test_create_holding PASSED [  1%]\ntests/test_models/test_holdings.py::TestHoldingsModel::test_quantity_constraint PASSED [  2%]\ntests/test_models/test_holdings.py::TestHoldingsModel::test_unique_user_company_constraint PASSED [  4%]\ntests/test_models/test_holdings.py::TestHoldingsModel::test_holding_repr PASSED [  5%]\ntests/test_models/test_holdings.py::TestHoldingsModel::test_update_quantity PASSED [  7%]\ntests/test_models/test_holdings.py::TestHoldingsModel::test_average_price_calculation PASSED [  8%]\ntests/test_models/test_order.py::TestOrderModel::test_create_buy_order PASSED [ 10%]\ntests/test_models/test_order.py::TestOrderModel::test_create_sell_order PASSED [ 11%]\ntests/test_models/test_order.py::TestOrderModel::test_order_status_transitions PASSED [ 13%]\ntests/test_models/test_order.py::TestOrderModel::test_failed_order_with_reason PASSED [ 14%]\ntests/test_models/test_order.py::TestOrderModel::test_realized_gain_loss PASSED [ 15%]\ntests/test_models/test_order.py::TestOrderModel::test_order_repr PASSED  [ 17%]\ntests/test_models/test_order.py::TestOrderModel::test_quantity_constraint PASSED [ 18%]\ntests/test_models/test_user.py::TestUserModel::test_create_user PASSED   [ 20%]\ntests/test_models/test_user.py::TestUserModel::test_password_hashing PASSED [ 21%]\ntests/test_models/test_user.py::TestUserModel::test_unique_email_constraint PASSED [ 23%]\ntests/test_models/test_user.py::TestUserModel::test_user_relationships PASSED [ 24%]\ntests/test_models/test_user.py::TestUserModel::test_get_id_method PASSED [ 26%]\ntests/test_models/test_user.py::TestUserModel::test_user_repr PASSED     [ 27%]\ntests/test_models/test_user.py::TestUserModel::test_admin_flag PASSED    [ 28%]\ntests/test_models/test_user.py::TestUserModel::test_account_status PASSED [ 30%]\ntests/test_models/test_user.py::TestUserModel::test_json_fields PASSED   [ 31%]\ntests/test_models/test_wallet.py::TestWalletModel::test_create_wallet FAILED [ 33%]\ntests/test_models/test_wallet.py::TestWalletModel::test_default_values PASSED [ 34%]\ntests/test_models/test_wallet.py::TestWalletModel::test_balance_constraint PASSED [ 36%]\ntests/test_models/test_wallet.py::TestWalletModel::test_unique_user_constraint PASSED [ 37%]\ntests/test_models/test_wallet.py::TestWalletModel::test_wallet_repr PASSED [ 39%]\ntests/test_models/test_wallet.py::TestWalletModel::test_balance_updates PASSED [ 40%]\ntests/test_models/test_wallet.py::TestWalletModel::test_deposit_tracking PASSED [ 42%]\ntests/test_models/test_wallet.py::TestWalletModel::test_withdrawal_tracking PASSED [ 43%]\ntests/test_services/test_auth_service.py::TestAuthService::test_register_user_success PASSED [ 44%]\ntests/test_services/test_auth_service.py::TestAuthService::test_register_user_duplicate_email PASSED [ 46%]\ntests/test_services/test_auth_service.py::TestAuthService::test_register_user_invalid_email PASSED [ 47%]\ntests/test_services/test_auth_service.py::TestAuthService::test_register_user_weak_password PASSED [ 49%]\ntests/test_services/test_auth_service.py::TestAuthService::test_authenticate_user_success FAILED [ 50%]\ntests/test_services/test_auth_service.py::TestAuthService::test_authenticate_user_wrong_password PASSED [ 52%]\ntests/test_services/test_auth_service.py::TestAuthService::test_authenticate_user_nonexistent PASSED [ 53%]\ntests/test_services/test_auth_service.py::TestAuthService::test_authenticate_suspended_user FAILED [ 55%]\ntests/test_services/test_auth_service.py::TestAuthService::test_update_profile PASSED [ 56%]\ntests/test_services/test_auth_service.py::TestAuthService::test_update_profile_invalid_risk_tolerance FAILED [ 57%]\ntests/test_services/test_auth_service.py::TestAuthService::test_change_password_success FAILED [ 59%]\ntests/test_services/test_auth_service.py::TestAuthService::test_change_password_wrong_old_password PASSED [ 60%]\ntests/test_services/test_auth_service.py::TestAuthService::test_change_password_same_as_old FAILED [ 62%]\ntests/test_services/test_auth_service.py::TestAuthService::test_validate_email_valid PASSED [ 63%]\ntests/test_services/test_auth_service.py::TestAuthService::test_validate_email_invalid PASSED [ 65%]\ntests/test_services/test_auth_service.py::TestAuthService::test_validate_password_valid PASSED [ 66%]\ntests/test_services/test_auth_service.py::TestAuthService::test_validate_password_too_short PASSED [ 68%]\ntests/test_services/test_auth_service.py::TestAuthService::test_validate_password_no_uppercase PASSED [ 69%]\ntests/test_services/test_auth_service.py::TestAuthService::test_validate_password_no_lowercase PASSED [ 71%]\ntests/test_services/test_auth_service.py::TestAuthService::test_validate_password_no_digit PASSED [ 72%]\ntests/test_services/test_auth_service.py::TestAuthService::test_hash_and_verify_password PASSED [ 73%]\ntests/test_services/test_portfolio_service.py::TestPortfolioService::test_get_wallet_balance PASSED [ 75%]\ntests/test_services/test_portfolio_service.py::TestPortfolioService::test_get_wallet_balance_not_found PASSED [ 76%]\ntests/test_services/test_portfolio_service.py::TestPortfolioService::test_deposit_funds_success PASSED [ 78%]\ntests/test_services/test_portfolio_service.py::TestPortfolioService::test_deposit_funds_negative_amount PASSED [ 79%]\ntests/test_services/test_portfolio_service.py::TestPortfolioService::test_deposit_funds_zero_amount PASSED [ 81%]\ntests/test_services/test_portfolio_service.py::TestPortfolioService::test_withdraw_funds_success PASSED [ 82%]\ntests/test_services/test_portfolio_service.py::TestPortfolioService::test_withdraw_funds_insufficient_balance PASSED [ 84%]\ntests/test_services/test_portfolio_service.py::TestPortfolioService::test_withdraw_funds_negative_amount PASSED [ 85%]\ntests/test_services/test_portfolio_service.py::TestPortfolioService::test_get_holdings FAILED [ 86%]\ntests/test_services/test_portfolio_service.py::TestPortfolioService::test_get_holdings_empty PASSED [ 88%]\ntests/test_services/test_transaction_engine.py::TestTransactionEngine::test_calculate_commission PASSED [ 89%]\ntests/test_services/test_transaction_engine.py::TestTransactionEngine::test_validate_buy_order_success PASSED [ 91%]\ntests/test_services/test_transaction_engine.py::TestTransactionEngine::test_validate_buy_order_negative_quantity PASSED [ 92%]\ntests/test_services/test_transaction_engine.py::TestTransactionEngine::test_validate_buy_order_invalid_symbol PASSED [ 94%]\ntests/test_services/test_transaction_engine.py::TestTransactionEngine::test_validate_buy_order_insufficient_funds PASSED [ 95%]\ntests/test_services/test_transaction_engine.py::TestTransactionEngine::test_validate_sell_order_success FAILED [ 97%]\ntests/test_services/test_transaction_engine.py::TestTransactionEngine::test_validate_sell_order_insufficient_shares FAILED [ 98%]\ntests/test_services/test_transaction_engine.py::TestTransactionEngine::test_validate_sell_order_no_holdings FAILED [100%]\n\n================================== FAILURES ===================================\n_____________________ TestWalletModel.test_create_wallet ______________________\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1967: in _exec_single_context\n    self.dialect.do_execute(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\default.py:941: in do_execute\n    cursor.execute(statement, parameters)\nE   sqlite3.IntegrityError: UNIQUE constraint failed: wallets.user_id\n\nThe above exception was the direct cause of the following exception:\ntests\\test_models\\test_wallet.py:26: in test_create_wallet\n    db.session.commit()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\scoping.py:597: in commit\n    return self._proxied.commit()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:2028: in commit\n    trans.commit(_to_root=True)\n<string>:2: in commit\n    ???\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\state_changes.py:139: in _go\n    ret_value = fn(self, *arg, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:1313: in commit\n    self._prepare_impl()\n<string>:2: in _prepare_impl\n    ???\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\state_changes.py:139: in _go\n    ret_value = fn(self, *arg, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:1288: in _prepare_impl\n    self.session.flush()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:4352: in flush\n    self._flush(objects)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:4487: in _flush\n    with util.safe_reraise():\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\util\\langhelpers.py:146: in __exit__\n    raise exc_value.with_traceback(exc_tb)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:4448: in _flush\n    flush_context.execute()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py:466: in execute\n    rec.execute(self)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py:642: in execute\n    util.preloaded.orm_persistence.save_obj(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\persistence.py:93: in save_obj\n    _emit_insert_statements(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\persistence.py:1233: in _emit_insert_statements\n    result = connection.execute(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1418: in execute\n    return meth(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\sql\\elements.py:515: in _execute_on_connection\n    return connection._execute_clauseelement(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1640: in _execute_clauseelement\n    ret = self._execute_context(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1846: in _execute_context\n    return self._exec_single_context(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1986: in _exec_single_context\n    self._handle_dbapi_exception(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:2355: in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1967: in _exec_single_context\n    self.dialect.do_execute(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\default.py:941: in do_execute\n    cursor.execute(statement, parameters)\nE   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: wallets.user_id\nE   [SQL: INSERT INTO wallets (user_id, balance, currency, total_deposited, total_withdrawn, created_at, last_updated) VALUES (?, ?, ?, ?, ?, ?, ?)]\nE   [parameters: (1, 50000.0, 'USD', 50000.0, 0.0, '2025-11-18 19:17:29.832674', '2025-11-18 19:17:29.832674')]\nE   (Background on this error at: https://sqlalche.me/e/20/gkpj)\n_______________ TestAuthService.test_authenticate_user_success ________________\ntests\\test_services\\test_auth_service.py:78: in test_authenticate_user_success\n    assert user is not None\nE   assert None is not None\n---------------------------- Captured stderr call -----------------------------\nWARNING:app.services.auth_service:Authentication failed - invalid credentials for email: test@example.com\n------------------------------ Captured log call ------------------------------\nWARNING  app.services.auth_service:auth_service.py:112 Authentication failed - invalid credentials for email: test@example.com\n______________ TestAuthService.test_authenticate_suspended_user _______________\ntests\\test_services\\test_auth_service.py:109: in test_authenticate_suspended_user\n    with pytest.raises(ValueError, match=\"suspended\"):\nE   Failed: DID NOT RAISE <class 'ValueError'>\n---------------------------- Captured stderr call -----------------------------\nWARNING:app.services.auth_service:Authentication failed - invalid credentials for email: test@example.com\n------------------------------ Captured log call ------------------------------\nWARNING  app.services.auth_service:auth_service.py:112 Authentication failed - invalid credentials for email: test@example.com\n_________ TestAuthService.test_update_profile_invalid_risk_tolerance __________\napp\\services\\auth_service.py:177: in update_profile\n    raise ValueError(\"Invalid risk tolerance value\")\nE   ValueError: Invalid risk tolerance value\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_services\\test_auth_service.py:141: in test_update_profile_invalid_risk_tolerance\n    AuthService.update_profile(\napp\\services\\auth_service.py:196: in update_profile\n    raise Exception(f\"Failed to update profile: {str(e)}\")\nE   Exception: Failed to update profile: Invalid risk tolerance value\n---------------------------- Captured stderr call -----------------------------\nERROR:app.services.auth_service:Profile update failed for user_id=1: Invalid risk tolerance value\nTraceback (most recent call last):\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\services\\auth_service.py\", line 177, in update_profile\n    raise ValueError(\"Invalid risk tolerance value\")\nValueError: Invalid risk tolerance value\n------------------------------ Captured log call ------------------------------\nERROR    app.services.auth_service:auth_service.py:195 Profile update failed for user_id=1: Invalid risk tolerance value\nTraceback (most recent call last):\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\services\\auth_service.py\", line 177, in update_profile\n    raise ValueError(\"Invalid risk tolerance value\")\nValueError: Invalid risk tolerance value\n________________ TestAuthService.test_change_password_success _________________\ntests\\test_services\\test_auth_service.py:149: in test_change_password_success\n    result = AuthService.change_password(\napp\\services\\auth_service.py:222: in change_password\n    raise ValueError(\"Current password is incorrect\")\nE   ValueError: Current password is incorrect\n---------------------------- Captured stderr call -----------------------------\nWARNING:app.services.auth_service:Password change failed - incorrect current password: user_id=1\n------------------------------ Captured log call ------------------------------\nWARNING  app.services.auth_service:auth_service.py:221 Password change failed - incorrect current password: user_id=1\n______________ TestAuthService.test_change_password_same_as_old _______________\ntests\\test_services\\test_auth_service.py:179: in test_change_password_same_as_old\n    AuthService.change_password(\napp\\services\\auth_service.py:222: in change_password\n    raise ValueError(\"Current password is incorrect\")\nE   ValueError: Current password is incorrect\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_services\\test_auth_service.py:178: in test_change_password_same_as_old\n    with pytest.raises(ValueError, match=\"must be different\"):\nE   AssertionError: Regex pattern did not match.\nE    Regex: 'must be different'\nE    Input: 'Current password is incorrect'\n---------------------------- Captured stderr call -----------------------------\nWARNING:app.services.auth_service:Password change failed - incorrect current password: user_id=1\n------------------------------ Captured log call ------------------------------\nWARNING  app.services.auth_service:auth_service.py:221 Password change failed - incorrect current password: user_id=1\n___________________ TestPortfolioService.test_get_holdings ____________________\ntests\\test_services\\test_portfolio_service.py:138: in test_get_holdings\n    assert any(h.holding_id == test_holding.holding_id for h in holdings)\ntests\\test_services\\test_portfolio_service.py:138: in <genexpr>\n    assert any(h.holding_id == test_holding.holding_id for h in holdings)\nE   AttributeError: 'dict' object has no attribute 'holding_id'\n___________ TestTransactionEngine.test_validate_sell_order_success ____________\napp\\utils\\error_handlers.py:36: in wrapper\n    return func(*args, **kwargs)\nE   TypeError: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_services\\test_transaction_engine.py:99: in test_validate_sell_order_success\n    is_valid, error = engine.validate_sell_order(\napp\\utils\\error_handlers.py:57: in wrapper\n    raise ValidationError(f\"An unexpected error occurred: {str(e)}\")\nE   app.utils.exceptions.ValidationError: An unexpected error occurred: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\n---------------------------- Captured stderr call -----------------------------\nERROR:app.utils.error_handlers:validate_sell_order unexpected error: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\nTraceback (most recent call last):\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\utils\\error_handlers.py\", line 36, in wrapper\n    return func(*args, **kwargs)\nTypeError: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\n------------------------------ Captured log call ------------------------------\nERROR    app.utils.error_handlers:error_handlers.py:56 validate_sell_order unexpected error: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\nTraceback (most recent call last):\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\utils\\error_handlers.py\", line 36, in wrapper\n    return func(*args, **kwargs)\nTypeError: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\n_____ TestTransactionEngine.test_validate_sell_order_insufficient_shares ______\napp\\utils\\error_handlers.py:36: in wrapper\n    return func(*args, **kwargs)\nE   TypeError: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_services\\test_transaction_engine.py:115: in test_validate_sell_order_insufficient_shares\n    is_valid, error = engine.validate_sell_order(\napp\\utils\\error_handlers.py:57: in wrapper\n    raise ValidationError(f\"An unexpected error occurred: {str(e)}\")\nE   app.utils.exceptions.ValidationError: An unexpected error occurred: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\n---------------------------- Captured stderr call -----------------------------\nERROR:app.utils.error_handlers:validate_sell_order unexpected error: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\nTraceback (most recent call last):\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\utils\\error_handlers.py\", line 36, in wrapper\n    return func(*args, **kwargs)\nTypeError: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\n------------------------------ Captured log call ------------------------------\nERROR    app.utils.error_handlers:error_handlers.py:56 validate_sell_order unexpected error: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\nTraceback (most recent call last):\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\utils\\error_handlers.py\", line 36, in wrapper\n    return func(*args, **kwargs)\nTypeError: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\n_________ TestTransactionEngine.test_validate_sell_order_no_holdings __________\napp\\utils\\error_handlers.py:36: in wrapper\n    return func(*args, **kwargs)\nE   TypeError: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_services\\test_transaction_engine.py:140: in test_validate_sell_order_no_holdings\n    is_valid, error = engine.validate_sell_order(\napp\\utils\\error_handlers.py:57: in wrapper\n    raise ValidationError(f\"An unexpected error occurred: {str(e)}\")\nE   app.utils.exceptions.ValidationError: An unexpected error occurred: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\n---------------------------- Captured stderr call -----------------------------\nERROR:app.utils.error_handlers:validate_sell_order unexpected error: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\nTraceback (most recent call last):\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\utils\\error_handlers.py\", line 36, in wrapper\n    return func(*args, **kwargs)\nTypeError: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\n------------------------------ Captured log call ------------------------------\nERROR    app.utils.error_handlers:error_handlers.py:56 validate_sell_order unexpected error: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\nTraceback (most recent call last):\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\utils\\error_handlers.py\", line 36, in wrapper\n    return func(*args, **kwargs)\nTypeError: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\n\n---------- coverage: platform win32, python 3.10.10-final-0 ----------\nName                                   Stmts   Miss Branch BrPart   Cover   Missing\n-----------------------------------------------------------------------------------\napp\\jobs\\scheduler.py                     18     18      2      0   0.00%   5-70\napp\\utils\\logging_config.py               23     23      4      0   0.00%   5-60\napp\\utils\\sql_security.py                  7      7      2      0   0.00%   5-42\napp\\utils\\validators.py                  133    133     82      0   0.00%   5-335\napp\\services\\report_service.py           182    165     86      0   6.34%   21, 36-118, 136-195, 239-334, 367-403, 417-465\napp\\services\\prediction_service.py       192    172     54      0   8.13%   28-39, 52-91, 104-108, 127-240, 260-376\napp\\routes\\dashboard.py                  226    199     96      0   8.39%   31-83, 94-213, 223-292, 305-362, 380-422\napp\\services\\admin_service.py            550    485    164      0   9.10%   58-101, 114-203, 217-300, 314-356, 369-411, 424-460, 475-550, 571-608, 626-682, 696-738, 751-777, 790-838, 854-869, 887-928, 942-970, 983-1003, 1017-1040, 1052-1146, 1166-1203, 1213-1247, 1266-1300\napp\\utils\\visualization.py               201    177     26      0  10.57%   32-37, 50-56, 69-88, 107-133, 152-178, 197-224, 245-271, 290-321, 344-385, 394-412, 427-429\napp\\services\\sentiment_engine.py         175    151     50      0  10.67%   25-40, 50-57, 61-78, 87, 103-147, 160-174, 186-222, 238-290, 302-326, 336-369, 382-391, 411-428\napp\\services\\notification_service.py     117    100     26      0  11.89%   41-71, 92-113, 125-133, 145-162, 174-197, 209-223, 235-256, 275-288\napp\\services\\dividend_manager.py         106     90     22      0  12.50%   31-58, 62-79, 83-99, 103-109, 113-127, 136-214\napp\\routes\\auth.py                        99     83     26      0  12.80%   18-45, 52-105, 112-114, 121-185\napp\\routes\\orders.py                     214    177     54      0  13.81%   33-35, 40-42, 50-88, 102-135, 142-183, 190-236, 243-255, 266-351, 372-443\napp\\utils\\xss_protection.py               48     38     16      0  15.62%   23-46, 62-66, 79-96, 112, 193-207, 222-253\napp\\routes\\reports.py                    158    127     30      0  16.49%   20-22, 29-38, 50-73, 84-101, 112-127, 138-188, 195-248, 255-312\napp\\services\\stock_repository.py         261    206     90      2  16.81%   51, 79-118, 133-154, 171-190, 213-246, 260-290, 299-304, 321-353, 357, 376-403, 423-441, 458-514, 519-544, 560-594, 606-611, 636-659\napp\\cli_commands.py                      187    144     40      0  18.94%   26-42, 59-185, 197-205, 217-225, 237-245, 257-277, 292-322\napp\\services\\audit_service.py             63     48     16      0  18.99%   33-65, 86-126, 140-150, 164-178\napp\\routes\\api.py                        213    164     32      0  20.00%   23-51, 74-144, 164-198, 217-238, 257-311, 330-355, 370-381, 403-442, 460-487, 502-515, 533-560\napp\\utils\\decorators.py                   33     24     10      0  20.93%   18-24, 40-48, 63-74\napp\\services\\transaction_engine.py       230    177     64      3  21.09%   74, 83, 93, 117-142, 161-226, 251-338, 357-418, 445-530, 553-584, 607-637\napp\\routes\\portfolio.py                   61     47      4      0  21.54%   20-31, 38-103\napp\\routes\\admin.py                      517    388     76      0  21.75%   32-69, 79-110, 125-164, 172-214, 222-238, 246-265, 282-319, 327-341, 349-374, 382-394, 402-413, 421-440, 448-462, 473-517, 525-548, 556-584, 592-606, 614-651, 661-682, 690-718, 726-750, 758-772, 782-808, 816-853, 863-868, 876-897, 907-947, 955-971\napp\\routes\\notifications.py               66     47     12      0  24.36%   20-66, 85-89, 98-102, 111-122, 131-143\napp\\utils\\rate_limiter.py                 51     36     10      0  24.59%   39-58, 67-69, 78-81, 93-105, 112-131\napp\\forms\\auth_forms.py                   44     16     14      0  48.28%   37-38, 42-54, 133-145\napp\\services\\portfolio_service.py        134     64     26      2  51.25%   66, 93-96, 123, 159-162, 223-225, 237-251, 266-291, 314-348, 377-410\napp\\forms\\dividend_forms.py               21      6      8      0  51.72%   63-65, 69-71\napp\\utils\\error_handlers.py               51     22      4      0  52.73%   40-41, 44-49, 52-53, 73, 78, 83-86, 91-101\napp\\forms\\order_forms.py                  26      8      4      0  60.00%   34-37, 64-67\napp\\models\\job_log.py                     25     10      0      0  60.00%   27-32, 37-40\napp\\services\\auth_service.py             140     40     48     11  69.68%   76-79, 94-95, 101-110, 127, 137-138, 148, 167-168, 175->180, 180->183, 183->186, 187, 216-217, 225-244, 276, 282\napp\\models\\audit_log.py                   17      1      0      0  94.12%   59\napp\\forms\\portfolio_forms.py              11      0      0      0 100.00%\napp\\forms\\prediction_forms.py             12      0      0      0 100.00%\napp\\forms\\report_forms.py                 16      0      0      0 100.00%\napp\\jobs\\dividend_processor.py             0      0      0      0 100.00%\napp\\jobs\\price_updater.py                  0      0      0      0 100.00%\napp\\models\\broker.py                      13      0      0      0 100.00%\napp\\models\\company.py                     23      0      0      0 100.00%\napp\\models\\dividend.py                    25      0      0      0 100.00%\napp\\models\\holding.py                     14      0      0      0 100.00%\napp\\models\\notification.py                12      0      0      0 100.00%\napp\\models\\order.py                       19      0      0      0 100.00%\napp\\models\\price_history.py               15      0      0      0 100.00%\napp\\models\\sentiment_cache.py             14      0      0      0 100.00%\napp\\models\\transaction.py                 14      0      0      0 100.00%\napp\\models\\user.py                        33      0      0      0 100.00%\napp\\models\\wallet.py                      13      0      0      0 100.00%\napp\\utils\\exceptions.py                   12      0      0      0 100.00%\napp\\utils\\retry_helper.py                  0      0      0      0 100.00%\n-----------------------------------------------------------------------------------\nTOTAL                                   4835   3593   1198     18  21.52%\nCoverage HTML written to dir htmlcov\nCoverage XML written to file coverage.xml\n\nFAIL Required test coverage of 85% not reached. Total coverage: 21.52%\n=========================== short test summary info ===========================\nFAILED tests/test_models/test_wallet.py::TestWalletModel::test_create_wallet - sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: wallets.user_id\n[SQL: INSERT INTO wallets (user_id, balance, currency, total_deposited, total_withdrawn, created_at, last_updated) VALUES (?, ?, ?, ?, ?, ?, ?)]\n[parameters: (1, 50000.0, 'USD', 50000.0, 0.0, '2025-11-18 19:17:29.832674', '2025-11-18 19:17:29.832674')]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)\nFAILED tests/test_services/test_auth_service.py::TestAuthService::test_authenticate_user_success - assert None is not None\nFAILED tests/test_services/test_auth_service.py::TestAuthService::test_authenticate_suspended_user - Failed: DID NOT RAISE <class 'ValueError'>\nFAILED tests/test_services/test_auth_service.py::TestAuthService::test_update_profile_invalid_risk_tolerance - Exception: Failed to update profile: Invalid risk tolerance value\nFAILED tests/test_services/test_auth_service.py::TestAuthService::test_change_password_success - ValueError: Current password is incorrect\nFAILED tests/test_services/test_auth_service.py::TestAuthService::test_change_password_same_as_old - AssertionError: Regex pattern did not match.\n Regex: 'must be different'\n Input: 'Current password is incorrect'\nFAILED tests/test_services/test_portfolio_service.py::TestPortfolioService::test_get_holdings - AttributeError: 'dict' object has no attribute 'holding_id'\nFAILED tests/test_services/test_transaction_engine.py::TestTransactionEngine::test_validate_sell_order_success - app.utils.exceptions.ValidationError: An unexpected error occurred: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\nFAILED tests/test_services/test_transaction_engine.py::TestTransactionEngine::test_validate_sell_order_insufficient_shares - app.utils.exceptions.ValidationError: An unexpected error occurred: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\nFAILED tests/test_services/test_transaction_engine.py::TestTransactionEngine::test_validate_sell_order_no_holdings - app.utils.exceptions.ValidationError: An unexpected error occurred: TransactionEngine.validate_sell_order() got an unexpected keyword argument 'price_per_share'\n======================= 10 failed, 59 passed in 34.16s ========================\n"
    },
    "integration_tests": {
      "status": "FAILED",
      "output": "============================= test session starts =============================\nplatform win32 -- Python 3.10.10, pytest-8.3.3, pluggy-1.5.0 -- C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\python.exe\ncachedir: .pytest_cache\nbenchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)\nPyQt6 6.9.1 -- Qt runtime 6.9.1 -- Qt compiled 6.9.0\nrootdir: d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\nconfigfile: pytest.ini\nplugins: anyio-4.9.0, dash-3.3.0, logfire-4.4.0, asyncio-1.0.0, benchmark-5.1.0, cov-5.0.0, flask-1.3.0, mock-3.15.1, qt-4.5.0\nasyncio: mode=strict, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollecting ... collected 123 items\n\ntests/test_integration/test_buy_order_flow.py::TestBuyOrderFlow::test_complete_buy_order_flow PASSED [  0%]\ntests/test_integration/test_sell_order_flow.py::TestSellOrderFlow::test_complete_sell_order_flow PASSED [  1%]\ntests/test_integration/test_user_workflows.py::TestCompleteUserWorkflows::test_register_login_deposit_buy_view_sell_workflow PASSED [  2%]\ntests/test_integration/test_user_workflows.py::TestCompleteUserWorkflows::test_login_predictions_order_workflow PASSED [  3%]\ntests/test_integration/test_user_workflows.py::TestCompleteUserWorkflows::test_login_reports_export_workflow FAILED [  4%]\ntests/test_integration/test_user_workflows.py::TestAdminWorkflows::test_admin_login_manage_users_dividend_monitoring_workflow FAILED [  4%]\ntests/test_integration/test_user_workflows.py::TestErrorScenarios::test_insufficient_funds_workflow FAILED [  5%]\ntests/test_integration/test_user_workflows.py::TestErrorScenarios::test_insufficient_shares_workflow FAILED [  6%]\ntests/test_integration/test_user_workflows.py::TestErrorScenarios::test_invalid_stock_symbol_workflow FAILED [  7%]\ntests/test_integration/test_user_workflows.py::TestConcurrentWorkflows::test_concurrent_buy_orders PASSED [  8%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_requires_login FAILED [  8%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_requires_admin_role FAILED [  9%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_page_for_admin FAILED [ 10%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_users_page FAILED [ 11%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_companies_page FAILED [ 12%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_brokers_page FAILED [ 13%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_dividends_page FAILED [ 13%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_monitoring_page FAILED [ 14%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_user_view FAILED [ 15%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_user_edit FAILED [ 16%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_user_suspend FAILED [ 17%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_company_create_page FAILED [ 17%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_company_edit_page FAILED [ 18%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_broker_create_page FAILED [ 19%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_dividend_create_page FAILED [ 20%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_audit_logs FAILED [ 21%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_non_admin_cannot_access_user_management FAILED [ 21%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_non_admin_cannot_access_company_management FAILED [ 22%]\ntests/test_routes/test_admin_routes.py::TestAdminRoutes::test_non_admin_cannot_suspend_users FAILED [ 23%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_search_stocks_requires_login PASSED [ 24%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_search_stocks_authenticated PASSED [ 25%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_search_stocks_with_filters PASSED [ 26%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_search_stocks_pagination PASSED [ 26%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_autocomplete_requires_login PASSED [ 27%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_autocomplete_authenticated PASSED [ 28%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_autocomplete_empty_query PASSED [ 29%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_autocomplete_limit PASSED [ 30%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_trending_stocks_requires_login PASSED [ 30%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_trending_stocks_authenticated PASSED [ 31%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_trending_stocks_with_limit PASSED [ 32%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_get_stock_details_requires_login PASSED [ 33%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_get_stock_details_authenticated FAILED [ 34%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_get_stock_details_not_found PASSED [ 34%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_get_stock_price_requires_login PASSED [ 35%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_get_stock_price_authenticated FAILED [ 36%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_get_sectors_requires_login PASSED [ 37%]\ntests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_get_sectors_authenticated PASSED [ 38%]\ntests/test_routes/test_api_routes.py::TestNotificationAPIRoutes::test_get_notifications_requires_login PASSED [ 39%]\ntests/test_routes/test_api_routes.py::TestNotificationAPIRoutes::test_get_notifications_authenticated PASSED [ 39%]\ntests/test_routes/test_api_routes.py::TestNotificationAPIRoutes::test_get_notifications_with_limit PASSED [ 40%]\ntests/test_routes/test_api_routes.py::TestNotificationAPIRoutes::test_get_notifications_unread_only PASSED [ 41%]\ntests/test_routes/test_api_routes.py::TestNotificationAPIRoutes::test_mark_notification_read_requires_login PASSED [ 42%]\ntests/test_routes/test_api_routes.py::TestNotificationAPIRoutes::test_mark_notification_read_authenticated PASSED [ 43%]\ntests/test_routes/test_api_routes.py::TestNotificationAPIRoutes::test_mark_notification_read_not_found PASSED [ 43%]\ntests/test_routes/test_api_routes.py::TestNotificationAPIRoutes::test_mark_notification_read_unauthorized PASSED [ 44%]\ntests/test_routes/test_api_routes.py::TestNotificationAPIRoutes::test_mark_all_notifications_read_requires_login PASSED [ 45%]\ntests/test_routes/test_api_routes.py::TestNotificationAPIRoutes::test_mark_all_notifications_read_authenticated PASSED [ 46%]\ntests/test_routes/test_api_routes.py::TestNotificationAPIRoutes::test_delete_notification_requires_login PASSED [ 47%]\ntests/test_routes/test_api_routes.py::TestNotificationAPIRoutes::test_delete_notification_authenticated PASSED [ 47%]\ntests/test_routes/test_api_routes.py::TestNotificationAPIRoutes::test_delete_notification_not_found PASSED [ 48%]\ntests/test_routes/test_api_routes.py::TestNotificationAPIRoutes::test_delete_notification_unauthorized PASSED [ 49%]\ntests/test_routes/test_api_routes.py::TestAPIErrorResponses::test_api_returns_json_on_error PASSED [ 50%]\ntests/test_routes/test_api_routes.py::TestAPIErrorResponses::test_api_handles_invalid_parameters PASSED [ 51%]\ntests/test_routes/test_api_routes.py::TestAPIErrorResponses::test_api_handles_missing_required_parameters FAILED [ 52%]\ntests/test_routes/test_auth_routes.py::TestAuthRoutes::test_register_page_loads FAILED [ 52%]\ntests/test_routes/test_auth_routes.py::TestAuthRoutes::test_login_page_loads FAILED [ 53%]\ntests/test_routes/test_auth_routes.py::TestAuthRoutes::test_register_user_success FAILED [ 54%]\ntests/test_routes/test_auth_routes.py::TestAuthRoutes::test_register_duplicate_email FAILED [ 55%]\ntests/test_routes/test_auth_routes.py::TestAuthRoutes::test_login_success FAILED [ 56%]\ntests/test_routes/test_auth_routes.py::TestAuthRoutes::test_login_wrong_password FAILED [ 56%]\ntests/test_routes/test_auth_routes.py::TestAuthRoutes::test_login_nonexistent_user FAILED [ 57%]\ntests/test_routes/test_auth_routes.py::TestAuthRoutes::test_logout FAILED [ 58%]\ntests/test_routes/test_auth_routes.py::TestAuthRoutes::test_profile_requires_login FAILED [ 59%]\ntests/test_routes/test_auth_routes.py::TestAuthRoutes::test_profile_page_authenticated FAILED [ 60%]\ntests/test_routes/test_auth_routes.py::TestAuthRoutes::test_update_profile FAILED [ 60%]\ntests/test_routes/test_auth_routes.py::TestAuthRoutes::test_register_password_mismatch FAILED [ 61%]\ntests/test_routes/test_auth_routes.py::TestAuthRoutes::test_register_weak_password FAILED [ 62%]\ntests/test_routes/test_auth_routes.py::TestAuthRoutes::test_register_invalid_email FAILED [ 63%]\ntests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_dashboard_requires_login FAILED [ 64%]\ntests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_dashboard_page_authenticated FAILED [ 65%]\ntests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_dashboard_displays_wallet_balance FAILED [ 65%]\ntests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_dashboard_displays_portfolio_value FAILED [ 66%]\ntests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_predict_requires_login FAILED [ 67%]\ntests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_predict_page_authenticated FAILED [ 68%]\ntests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_predict_submission FAILED [ 69%]\ntests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_predict_invalid_symbol FAILED [ 69%]\ntests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_home_page_redirects_to_dashboard FAILED [ 70%]\ntests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_home_page_shows_landing_for_guests FAILED [ 71%]\ntests/test_routes/test_order_routes.py::TestOrderRoutes::test_orders_requires_login FAILED [ 72%]\ntests/test_routes/test_order_routes.py::TestOrderRoutes::test_orders_page_authenticated FAILED [ 73%]\ntests/test_routes/test_order_routes.py::TestOrderRoutes::test_buy_page_requires_login FAILED [ 73%]\ntests/test_routes/test_order_routes.py::TestOrderRoutes::test_buy_page_authenticated FAILED [ 74%]\ntests/test_routes/test_order_routes.py::TestOrderRoutes::test_sell_page_requires_login FAILED [ 75%]\ntests/test_routes/test_order_routes.py::TestOrderRoutes::test_sell_page_authenticated FAILED [ 76%]\ntests/test_routes/test_order_routes.py::TestOrderRoutes::test_transactions_page_authenticated FAILED [ 77%]\ntests/test_routes/test_order_routes.py::TestOrderRoutes::test_buy_order_submission FAILED [ 78%]\ntests/test_routes/test_order_routes.py::TestOrderRoutes::test_sell_order_submission FAILED [ 78%]\ntests/test_routes/test_order_routes.py::TestOrderRoutes::test_buy_order_invalid_symbol FAILED [ 79%]\ntests/test_routes/test_order_routes.py::TestOrderRoutes::test_sell_order_insufficient_shares FAILED [ 80%]\ntests/test_routes/test_order_routes.py::TestOrderRoutes::test_order_view_details FAILED [ 81%]\ntests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_portfolio_requires_login FAILED [ 82%]\ntests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_portfolio_page_authenticated FAILED [ 82%]\ntests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_wallet_requires_login PASSED [ 83%]\ntests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_wallet_page_authenticated FAILED [ 84%]\ntests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_deposit_funds FAILED [ 85%]\ntests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_withdraw_funds FAILED [ 86%]\ntests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_deposit_invalid_amount FAILED [ 86%]\ntests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_withdraw_insufficient_funds FAILED [ 87%]\ntests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_portfolio_displays_holdings FAILED [ 88%]\ntests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_wallet_displays_balance FAILED [ 89%]\ntests/test_routes/test_report_routes.py::TestReportRoutes::test_reports_requires_login FAILED [ 90%]\ntests/test_routes/test_report_routes.py::TestReportRoutes::test_reports_page_authenticated FAILED [ 91%]\ntests/test_routes/test_report_routes.py::TestReportRoutes::test_transaction_report_requires_login FAILED [ 91%]\ntests/test_routes/test_report_routes.py::TestReportRoutes::test_transaction_report_authenticated FAILED [ 92%]\ntests/test_routes/test_report_routes.py::TestReportRoutes::test_billing_report_requires_login FAILED [ 93%]\ntests/test_routes/test_report_routes.py::TestReportRoutes::test_billing_report_authenticated FAILED [ 94%]\ntests/test_routes/test_report_routes.py::TestReportRoutes::test_performance_report_requires_login FAILED [ 95%]\ntests/test_routes/test_report_routes.py::TestReportRoutes::test_performance_report_authenticated FAILED [ 95%]\ntests/test_routes/test_report_routes.py::TestReportRoutes::test_transaction_report_with_date_range FAILED [ 96%]\ntests/test_routes/test_report_routes.py::TestReportRoutes::test_billing_report_with_month FAILED [ 97%]\ntests/test_routes/test_report_routes.py::TestReportRoutes::test_performance_report_with_period FAILED [ 98%]\ntests/test_routes/test_report_routes.py::TestReportRoutes::test_report_export_csv FAILED [ 99%]\ntests/test_routes/test_report_routes.py::TestReportRoutes::test_report_export_pdf FAILED [100%]\n\n================================== FAILURES ===================================\n________ TestCompleteUserWorkflows.test_login_reports_export_workflow _________\ntests\\test_integration\\test_user_workflows.py:257: in test_login_reports_export_workflow\n    csv_data = report_service.export_transactions_csv(\napp\\services\\report_service.py:458: in export_transactions_csv\n    txn.quantity if txn.quantity else '',\nE   AttributeError: 'Transaction' object has no attribute 'quantity'\n---------------------------- Captured stdout call -----------------------------\n\\u2713 User authenticated: test@example.com\\n\\u2713 Created test transaction\\n\\u2713 Generated transaction report with 1 transactions\\n\\u2713 Generated billing report\n_ TestAdminWorkflows.test_admin_login_manage_users_dividend_monitoring_workflow _\ntests\\test_integration\\test_user_workflows.py:298: in test_admin_login_manage_users_dividend_monitoring_workflow\n    users = admin_service.get_all_users(filters={}, pagination={'page': 1, 'per_page': 10})\nE   TypeError: AdminService.get_all_users() got an unexpected keyword argument 'pagination'\n---------------------------- Captured stdout call -----------------------------\n\\u2713 Admin authenticated: admin@example.com\n_____________ TestErrorScenarios.test_insufficient_funds_workflow _____________\ntests\\test_integration\\test_user_workflows.py:399: in test_insufficient_funds_workflow\n    assert order.order_status == 'FAILED'\nE   AssertionError: assert 'COMPLETED' == 'FAILED'\nE     \nE     - FAILED\nE     + COMPLETED\n____________ TestErrorScenarios.test_insufficient_shares_workflow _____________\ntests\\test_integration\\test_user_workflows.py:409: in test_insufficient_shares_workflow\n    order = engine.create_sell_order(\napp\\utils\\error_handlers.py:36: in wrapper\n    return func(*args, **kwargs)\napp\\services\\transaction_engine.py:398: in create_sell_order\n    raise InsufficientSharesError(error_msg) if \"Insufficient shares\" in error_msg else ValidationError(error_msg)\nE   app.utils.exceptions.ValidationError: You do not own any shares of TST983D9\n---------------------------- Captured stderr call -----------------------------\nWARNING:app.utils.error_handlers:create_sell_order validation error: You do not own any shares of TST983D9\n------------------------------ Captured log call ------------------------------\nWARNING  app.utils.error_handlers:error_handlers.py:40 create_sell_order validation error: You do not own any shares of TST983D9\n____________ TestErrorScenarios.test_invalid_stock_symbol_workflow ____________\napp\\services\\stock_repository.py:135: in _fetch_company_info_from_yfinance\n    info = ticker.info\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\ticker.py:153: in info\n    return self.get_info()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\base.py:223: in get_info\n    data = self._quote.info\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\scrapers\\quote.py:561: in info\n    self._fetch_complementary(self.proxy)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\scrapers\\quote.py:721: in _fetch_complementary\n    json_data = json.loads(json_str)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\json\\__init__.py:346: in loads\n    return _default_decoder.decode(s)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\json\\decoder.py:337: in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\json\\decoder.py:355: in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\nE   json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nDuring handling of the above exception, another exception occurred:\napp\\services\\transaction_engine.py:168: in create_buy_order\n    company = self.stock_repo.create_company(symbol)\napp\\utils\\error_handlers.py:36: in wrapper\n    return func(*args, **kwargs)\napp\\services\\stock_repository.py:96: in create_company\n    data = self._fetch_company_info_from_yfinance(symbol)\napp\\services\\stock_repository.py:154: in _fetch_company_info_from_yfinance\n    raise ExternalAPIError(f\"Failed to fetch company information: {str(e)}\")\nE   app.utils.exceptions.ExternalAPIError: Failed to fetch company information: Expecting value: line 1 column 1 (char 0)\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_integration\\test_user_workflows.py:427: in test_invalid_stock_symbol_workflow\n    order = engine.create_buy_order(\napp\\utils\\error_handlers.py:36: in wrapper\n    return func(*args, **kwargs)\napp\\services\\transaction_engine.py:170: in create_buy_order\n    raise ValidationError(f\"Invalid stock symbol: {symbol}\")\nE   app.utils.exceptions.ValidationError: Invalid stock symbol: INVALID_SYMBOL_XYZ\n---------------------------- Captured stderr call -----------------------------\nWARNING:app.services.stock_repository:Company not found: INVALID_SYMBOL_XYZ\nERROR:yfinance:429 Client Error: Too Many Requests for url: https://query2.finance.yahoo.com/v10/finance/quoteSummary/INVALID_SYMBOL_XYZ?modules=financialData%2CquoteType%2CdefaultKeyStatistics%2CassetProfile%2CsummaryDetail&corsDomain=finance.yahoo.com&formatted=false&symbol=INVALID_SYMBOL_XYZ&crumb=Edge%3A+Too+Many+Requests\nERROR:app.services.stock_repository:Failed to fetch company info for INVALID_SYMBOL_XYZ: Expecting value: line 1 column 1 (char 0)\nERROR:app.utils.error_handlers:create_company API error: Failed to fetch company information: Expecting value: line 1 column 1 (char 0)\nTraceback (most recent call last):\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\services\\stock_repository.py\", line 135, in _fetch_company_info_from_yfinance\n    info = ticker.info\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\ticker.py\", line 153, in info\n    return self.get_info()\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\base.py\", line 223, in get_info\n    data = self._quote.info\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\scrapers\\quote.py\", line 561, in info\n    self._fetch_complementary(self.proxy)\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\scrapers\\quote.py\", line 721, in _fetch_complementary\n    json_data = json.loads(json_str)\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\json\\__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\json\\decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\json\\decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\utils\\error_handlers.py\", line 36, in wrapper\n    return func(*args, **kwargs)\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\services\\stock_repository.py\", line 96, in create_company\n    data = self._fetch_company_info_from_yfinance(symbol)\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\services\\stock_repository.py\", line 154, in _fetch_company_info_from_yfinance\n    raise ExternalAPIError(f\"Failed to fetch company information: {str(e)}\")\napp.utils.exceptions.ExternalAPIError: Failed to fetch company information: Expecting value: line 1 column 1 (char 0)\nWARNING:app.utils.error_handlers:create_buy_order validation error: Invalid stock symbol: INVALID_SYMBOL_XYZ\n------------------------------ Captured log call ------------------------------\nWARNING  app.services.stock_repository:stock_repository.py:59 Company not found: INVALID_SYMBOL_XYZ\nERROR    yfinance:quote.py:626 429 Client Error: Too Many Requests for url: https://query2.finance.yahoo.com/v10/finance/quoteSummary/INVALID_SYMBOL_XYZ?modules=financialData%2CquoteType%2CdefaultKeyStatistics%2CassetProfile%2CsummaryDetail&corsDomain=finance.yahoo.com&formatted=false&symbol=INVALID_SYMBOL_XYZ&crumb=Edge%3A+Too+Many+Requests\nERROR    app.services.stock_repository:stock_repository.py:153 Failed to fetch company info for INVALID_SYMBOL_XYZ: Expecting value: line 1 column 1 (char 0)\nERROR    app.utils.error_handlers:error_handlers.py:52 create_company API error: Failed to fetch company information: Expecting value: line 1 column 1 (char 0)\nTraceback (most recent call last):\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\services\\stock_repository.py\", line 135, in _fetch_company_info_from_yfinance\n    info = ticker.info\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\ticker.py\", line 153, in info\n    return self.get_info()\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\base.py\", line 223, in get_info\n    data = self._quote.info\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\scrapers\\quote.py\", line 561, in info\n    self._fetch_complementary(self.proxy)\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\scrapers\\quote.py\", line 721, in _fetch_complementary\n    json_data = json.loads(json_str)\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\json\\__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\json\\decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\json\\decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\utils\\error_handlers.py\", line 36, in wrapper\n    return func(*args, **kwargs)\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\services\\stock_repository.py\", line 96, in create_company\n    data = self._fetch_company_info_from_yfinance(symbol)\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\services\\stock_repository.py\", line 154, in _fetch_company_info_from_yfinance\n    raise ExternalAPIError(f\"Failed to fetch company information: {str(e)}\")\napp.utils.exceptions.ExternalAPIError: Failed to fetch company information: Expecting value: line 1 column 1 (char 0)\nWARNING  app.utils.error_handlers:error_handlers.py:40 create_buy_order validation error: Invalid stock symbol: INVALID_SYMBOL_XYZ\n__________________ TestAdminRoutes.test_admin_requires_login __________________\ntests\\test_routes\\test_admin_routes.py:16: in test_admin_requires_login\n    assert response.status_code in [302, 401]\nE   assert 308 in [302, 401]\nE    +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\n_______________ TestAdminRoutes.test_admin_requires_admin_role ________________\ntests\\test_routes\\test_admin_routes.py:22: in test_admin_requires_admin_role\n    assert response.status_code in [302, 403]\nE   assert 308 in [302, 403]\nE    +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\n__________________ TestAdminRoutes.test_admin_page_for_admin __________________\ntests\\test_routes\\test_admin_routes.py:27: in test_admin_page_for_admin\n    assert response.status_code == 200\nE   assert 308 == 200\nE    +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\n____________________ TestAdminRoutes.test_admin_users_page ____________________\napp\\routes\\admin.py:303: in users\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\admin\\users\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_admin_routes.py:32: in test_admin_users_page\n    response = admin_client.get('/admin/users')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\utils\\decorators.py:48: in decorated_function\n    return f(*args, **kwargs)\napp\\routes\\admin.py:319: in users\n    return render_template('admin/users/index.html', users=[], total=0, page=1, pages=0)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\admin\\users\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.admin:Error loading users: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.admin:admin.py:317 Error loading users: block 'content' defined twice\n__________________ TestAdminRoutes.test_admin_companies_page __________________\napp\\routes\\admin.py:500: in companies\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\admin\\companies\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_admin_routes.py:38: in test_admin_companies_page\n    response = admin_client.get('/admin/companies')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\utils\\decorators.py:48: in decorated_function\n    return f(*args, **kwargs)\napp\\routes\\admin.py:517: in companies\n    return render_template('admin/companies/index.html', companies=[], total=0, page=1, pages=0)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\admin\\companies\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.admin:Error loading companies: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.admin:admin.py:515 Error loading companies: block 'content' defined twice\n___________________ TestAdminRoutes.test_admin_brokers_page ___________________\napp\\routes\\admin.py:673: in brokers\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\admin\\brokers\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_admin_routes.py:44: in test_admin_brokers_page\n    response = admin_client.get('/admin/brokers')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\utils\\decorators.py:48: in decorated_function\n    return f(*args, **kwargs)\napp\\routes\\admin.py:682: in brokers\n    return render_template('admin/brokers/index.html', brokers=[])\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\admin\\brokers\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.admin:Error loading brokers: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.admin:admin.py:680 Error loading brokers: block 'content' defined twice\n__________________ TestAdminRoutes.test_admin_dividends_page __________________\ntests\\test_routes\\test_admin_routes.py:50: in test_admin_dividends_page\n    response = admin_client.get('/admin/dividends')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\utils\\decorators.py:48: in decorated_function\n    return f(*args, **kwargs)\napp\\routes\\admin.py:110: in dividends\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\admin\\dividends\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n_________________ TestAdminRoutes.test_admin_monitoring_page __________________\napp\\routes\\admin.py:795: in monitoring\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\admin\\monitoring\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_admin_routes.py:56: in test_admin_monitoring_page\n    response = admin_client.get('/admin/monitoring')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\utils\\decorators.py:48: in decorated_function\n    return f(*args, **kwargs)\napp\\routes\\admin.py:808: in monitoring\n    return render_template('admin/monitoring/index.html', api_stats={}, job_logs=[], metrics={})\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\admin\\monitoring\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.admin:Error loading monitoring dashboard: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.admin:admin.py:806 Error loading monitoring dashboard: block 'content' defined twice\n____________________ TestAdminRoutes.test_admin_user_view _____________________\ntests\\test_routes\\test_admin_routes.py:63: in test_admin_user_view\n    assert response.status_code == 200\nE   assert 302 == 200\nE    +  where 302 = <WrapperTestResponse streamed [302 FOUND]>.status_code\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.admin:Error loading user details: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.admin:admin.py:339 Error loading user details: block 'content' defined twice\n____________________ TestAdminRoutes.test_admin_user_edit _____________________\ntests\\test_routes\\test_admin_routes.py:67: in test_admin_user_edit\n    response = admin_client.get(f'/admin/users/{test_user.user_id}/edit')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\utils\\decorators.py:48: in decorated_function\n    return f(*args, **kwargs)\napp\\routes\\admin.py:374: in edit_user\n    return render_template('admin/users/edit.html', user=user)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\admin\\users\\edit.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n___________________ TestAdminRoutes.test_admin_user_suspend ___________________\napp\\routes\\admin.py:303: in users\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\admin\\users\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_admin_routes.py:72: in test_admin_user_suspend\n    response = admin_client.post(f'/admin/users/{test_user.user_id}/suspend', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1150: in open\n    response = self.resolve_redirect(response, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1056: in resolve_redirect\n    return self.open(builder, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\utils\\decorators.py:48: in decorated_function\n    return f(*args, **kwargs)\napp\\routes\\admin.py:319: in users\n    return render_template('admin/users/index.html', users=[], total=0, page=1, pages=0)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\admin\\users\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.admin:Error loading user details: block 'content' defined twice\nERROR:app.routes.admin:Error loading users: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.admin:admin.py:339 Error loading user details: block 'content' defined twice\nERROR    app.routes.admin:admin.py:317 Error loading users: block 'content' defined twice\n_______________ TestAdminRoutes.test_admin_company_create_page ________________\ntests\\test_routes\\test_admin_routes.py:79: in test_admin_company_create_page\n    response = admin_client.get('/admin/companies/create')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\utils\\decorators.py:48: in decorated_function\n    return f(*args, **kwargs)\napp\\routes\\admin.py:548: in create_company\n    return render_template('admin/companies/create.html')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\admin\\companies\\create.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n________________ TestAdminRoutes.test_admin_company_edit_page _________________\ntests\\test_routes\\test_admin_routes.py:84: in test_admin_company_edit_page\n    response = admin_client.get(f'/admin/companies/{test_company.company_id}/edit')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\utils\\decorators.py:48: in decorated_function\n    return f(*args, **kwargs)\napp\\routes\\admin.py:584: in edit_company\n    return render_template('admin/companies/edit.html', company=company)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\admin\\companies\\edit.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n________________ TestAdminRoutes.test_admin_broker_create_page ________________\ntests\\test_routes\\test_admin_routes.py:89: in test_admin_broker_create_page\n    response = admin_client.get('/admin/brokers/create')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\utils\\decorators.py:48: in decorated_function\n    return f(*args, **kwargs)\napp\\routes\\admin.py:718: in create_broker\n    return render_template('admin/brokers/create.html', users=users_without_broker)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\admin\\brokers\\create.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n_______________ TestAdminRoutes.test_admin_dividend_create_page _______________\ntests\\test_routes\\test_admin_routes.py:94: in test_admin_dividend_create_page\n    response = admin_client.get('/admin/dividends/create')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\utils\\decorators.py:48: in decorated_function\n    return f(*args, **kwargs)\napp\\routes\\admin.py:164: in create_dividend\n    return render_template('admin/dividends/create.html', form=form)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\admin\\dividends\\create.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n____________________ TestAdminRoutes.test_admin_audit_logs ____________________\ntests\\test_routes\\test_admin_routes.py:101: in test_admin_audit_logs\n    assert response.status_code in [200, 404]\nE   assert 302 in [200, 404]\nE    +  where 302 = <WrapperTestResponse streamed [302 FOUND]>.status_code\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.admin:Error viewing audit logs: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.admin:admin.py:945 Error viewing audit logs: block 'content' defined twice\n________ TestAdminRoutes.test_non_admin_cannot_access_user_management _________\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\utils\\decorators.py:46: in decorated_function\n    abort(403)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\helpers.py:284: in abort\n    current_app.aborter(code, *args, **kwargs)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\exceptions.py:876: in __call__\n    raise self.mapping[code](*args, **kwargs)\nE   werkzeug.exceptions.Forbidden: 403 Forbidden: You don't have the permission to access the requested resource. It is either read-protected or not readable by the server.\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_admin_routes.py:105: in test_non_admin_cannot_access_user_management\n    response = authenticated_client.get('/admin/users')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:802: in handle_user_exception\n    return self.handle_http_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:777: in handle_http_exception\n    return self.ensure_sync(handler)(e)  # type: ignore[no-any-return]\napp\\utils\\error_handlers.py:78: in forbidden_error\n    return render_template('errors/403.html'), 403\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\errors\\403.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n_______ TestAdminRoutes.test_non_admin_cannot_access_company_management _______\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\utils\\decorators.py:46: in decorated_function\n    abort(403)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\helpers.py:284: in abort\n    current_app.aborter(code, *args, **kwargs)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\exceptions.py:876: in __call__\n    raise self.mapping[code](*args, **kwargs)\nE   werkzeug.exceptions.Forbidden: 403 Forbidden: You don't have the permission to access the requested resource. It is either read-protected or not readable by the server.\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_admin_routes.py:110: in test_non_admin_cannot_access_company_management\n    response = authenticated_client.get('/admin/companies')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:802: in handle_user_exception\n    return self.handle_http_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:777: in handle_http_exception\n    return self.ensure_sync(handler)(e)  # type: ignore[no-any-return]\napp\\utils\\error_handlers.py:78: in forbidden_error\n    return render_template('errors/403.html'), 403\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\errors\\403.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n_____________ TestAdminRoutes.test_non_admin_cannot_suspend_users _____________\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\utils\\decorators.py:46: in decorated_function\n    abort(403)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\helpers.py:284: in abort\n    current_app.aborter(code, *args, **kwargs)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\exceptions.py:876: in __call__\n    raise self.mapping[code](*args, **kwargs)\nE   werkzeug.exceptions.Forbidden: 403 Forbidden: You don't have the permission to access the requested resource. It is either read-protected or not readable by the server.\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_admin_routes.py:115: in test_non_admin_cannot_suspend_users\n    response = authenticated_client.post(f'/admin/users/{test_user.user_id}/suspend', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:802: in handle_user_exception\n    return self.handle_http_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:777: in handle_http_exception\n    return self.ensure_sync(handler)(e)  # type: ignore[no-any-return]\napp\\utils\\error_handlers.py:78: in forbidden_error\n    return render_template('errors/403.html'), 403\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\errors\\403.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n___________ TestStockAPIRoutes.test_get_stock_details_authenticated ___________\ntests\\test_routes\\test_api_routes.py:119: in test_get_stock_details_authenticated\n    assert response.status_code == 200\nE   assert 404 == 200\nE    +  where 404 = <WrapperTestResponse streamed [404 NOT FOUND]>.status_code\n---------------------------- Captured stderr call -----------------------------\nWARNING:app.services.stock_repository:Company not found: TEST\n------------------------------ Captured log call ------------------------------\nWARNING  app.services.stock_repository:stock_repository.py:59 Company not found: TEST\n____________ TestStockAPIRoutes.test_get_stock_price_authenticated ____________\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1967: in _exec_single_context\n    self.dialect.do_execute(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\default.py:941: in do_execute\n    cursor.execute(statement, parameters)\nE   sqlite3.IntegrityError: UNIQUE constraint failed: price_history.company_id, price_history.date\n\nThe above exception was the direct cause of the following exception:\ntests\\test_routes\\test_api_routes.py:161: in test_get_stock_price_authenticated\n    db.session.commit()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\scoping.py:597: in commit\n    return self._proxied.commit()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:2028: in commit\n    trans.commit(_to_root=True)\n<string>:2: in commit\n    ???\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\state_changes.py:139: in _go\n    ret_value = fn(self, *arg, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:1313: in commit\n    self._prepare_impl()\n<string>:2: in _prepare_impl\n    ???\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\state_changes.py:139: in _go\n    ret_value = fn(self, *arg, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:1288: in _prepare_impl\n    self.session.flush()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:4352: in flush\n    self._flush(objects)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:4487: in _flush\n    with util.safe_reraise():\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\util\\langhelpers.py:146: in __exit__\n    raise exc_value.with_traceback(exc_tb)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:4448: in _flush\n    flush_context.execute()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py:466: in execute\n    rec.execute(self)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py:642: in execute\n    util.preloaded.orm_persistence.save_obj(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\persistence.py:93: in save_obj\n    _emit_insert_statements(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\persistence.py:1233: in _emit_insert_statements\n    result = connection.execute(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1418: in execute\n    return meth(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\sql\\elements.py:515: in _execute_on_connection\n    return connection._execute_clauseelement(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1640: in _execute_clauseelement\n    ret = self._execute_context(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1846: in _execute_context\n    return self._exec_single_context(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1986: in _exec_single_context\n    self._handle_dbapi_exception(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:2355: in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1967: in _exec_single_context\n    self.dialect.do_execute(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\default.py:941: in do_execute\n    cursor.execute(statement, parameters)\nE   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: price_history.company_id, price_history.date\nE   [SQL: INSERT INTO price_history (company_id, date, open, high, low, close, adjusted_close, volume, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]\nE   [parameters: (6, '2025-11-19', 150.0, 155.0, 148.0, 152.0, 152.0, 1000000, '2025-11-18 19:18:42.273117')]\nE   (Background on this error at: https://sqlalche.me/e/20/gkpj)\n_____ TestAPIErrorResponses.test_api_handles_missing_required_parameters ______\ntests\\test_routes\\test_api_routes.py:451: in test_api_handles_missing_required_parameters\n    assert response.status_code == 404\nE   assert 308 == 404\nE    +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\n___________________ TestAuthRoutes.test_register_page_loads ___________________\ntests\\test_routes\\test_auth_routes.py:16: in test_register_page_loads\n    response = client.get('/auth/register')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\napp\\routes\\auth.py:45: in register\n    return render_template('auth/register.html', form=form)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\auth\\register.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n____________________ TestAuthRoutes.test_login_page_loads _____________________\ntests\\test_routes\\test_auth_routes.py:22: in test_login_page_loads\n    response = client.get('/auth/login')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\napp\\routes\\auth.py:105: in login\n    return render_template('auth/login.html', form=form)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\auth\\login.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n__________________ TestAuthRoutes.test_register_user_success __________________\napp\\routes\\dashboard.py:67: in index\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_auth_routes.py:28: in test_register_user_success\n    response = client.post('/auth/register', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1150: in open\n    response = self.resolve_redirect(response, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1056: in resolve_redirect\n    return self.open(builder, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\dashboard.py:83: in index\n    return render_template('dashboard/index.html', predict_form=PredictionForm())\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.dashboard:Error loading dashboard for user 1: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.dashboard:dashboard.py:81 Error loading dashboard for user 1: block 'content' defined twice\n________________ TestAuthRoutes.test_register_duplicate_email _________________\ntests\\test_routes\\test_auth_routes.py:49: in test_register_duplicate_email\n    response = client.post('/auth/register', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\napp\\routes\\auth.py:45: in register\n    return render_template('auth/register.html', form=form)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\auth\\register.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n______________________ TestAuthRoutes.test_login_success ______________________\ntests\\test_routes\\test_auth_routes.py:61: in test_login_success\n    response = client.post('/auth/login', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\napp\\routes\\auth.py:105: in login\n    return render_template('auth/login.html', form=form)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\auth\\login.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nWARNING:app.services.auth_service:Authentication failed - invalid credentials for email: test@example.com\n------------------------------ Captured log call ------------------------------\nWARNING  app.services.auth_service:auth_service.py:112 Authentication failed - invalid credentials for email: test@example.com\n__________________ TestAuthRoutes.test_login_wrong_password ___________________\ntests\\test_routes\\test_auth_routes.py:70: in test_login_wrong_password\n    response = client.post('/auth/login', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\napp\\routes\\auth.py:105: in login\n    return render_template('auth/login.html', form=form)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\auth\\login.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nWARNING:app.services.auth_service:Authentication failed - invalid credentials for email: test@example.com\n------------------------------ Captured log call ------------------------------\nWARNING  app.services.auth_service:auth_service.py:112 Authentication failed - invalid credentials for email: test@example.com\n_________________ TestAuthRoutes.test_login_nonexistent_user __________________\napp\\routes\\dashboard.py:67: in index\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_auth_routes.py:80: in test_login_nonexistent_user\n    response = client.post('/auth/login', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1150: in open\n    response = self.resolve_redirect(response, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1056: in resolve_redirect\n    return self.open(builder, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\dashboard.py:83: in index\n    return render_template('dashboard/index.html', predict_form=PredictionForm())\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.dashboard:Error loading dashboard for user 1: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.dashboard:dashboard.py:81 Error loading dashboard for user 1: block 'content' defined twice\n_________________________ TestAuthRoutes.test_logout __________________________\ntests\\test_routes\\test_auth_routes.py:90: in test_logout\n    response = authenticated_client.get('/auth/logout', follow_redirects=True)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1150: in open\n    response = self.resolve_redirect(response, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1056: in resolve_redirect\n    return self.open(builder, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\napp\\routes\\auth.py:105: in login\n    return render_template('auth/login.html', form=form)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\auth\\login.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n_________________ TestAuthRoutes.test_profile_requires_login __________________\ntests\\test_routes\\test_auth_routes.py:95: in test_profile_requires_login\n    response = client.get('/auth/profile')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\auth.py:185: in profile\n    return render_template('auth/profile.html',\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\auth\\profile.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n_______________ TestAuthRoutes.test_profile_page_authenticated ________________\ntests\\test_routes\\test_auth_routes.py:101: in test_profile_page_authenticated\n    response = authenticated_client.get('/auth/profile')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\auth.py:185: in profile\n    return render_template('auth/profile.html',\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\auth\\profile.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n_____________________ TestAuthRoutes.test_update_profile ______________________\ntests\\test_routes\\test_auth_routes.py:107: in test_update_profile\n    response = authenticated_client.post('/auth/profile', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\auth.py:185: in profile\n    return render_template('auth/profile.html',\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\auth\\profile.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n_______________ TestAuthRoutes.test_register_password_mismatch ________________\napp\\routes\\dashboard.py:67: in index\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_auth_routes.py:117: in test_register_password_mismatch\n    response = client.post('/auth/register', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1150: in open\n    response = self.resolve_redirect(response, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1056: in resolve_redirect\n    return self.open(builder, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\dashboard.py:83: in index\n    return render_template('dashboard/index.html', predict_form=PredictionForm())\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.dashboard:Error loading dashboard for user 1: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.dashboard:dashboard.py:81 Error loading dashboard for user 1: block 'content' defined twice\n_________________ TestAuthRoutes.test_register_weak_password __________________\napp\\routes\\dashboard.py:67: in index\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_auth_routes.py:129: in test_register_weak_password\n    response = client.post('/auth/register', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1150: in open\n    response = self.resolve_redirect(response, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1056: in resolve_redirect\n    return self.open(builder, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\dashboard.py:83: in index\n    return render_template('dashboard/index.html', predict_form=PredictionForm())\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.dashboard:Error loading dashboard for user 1: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.dashboard:dashboard.py:81 Error loading dashboard for user 1: block 'content' defined twice\n_________________ TestAuthRoutes.test_register_invalid_email __________________\napp\\routes\\dashboard.py:67: in index\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_auth_routes.py:140: in test_register_invalid_email\n    response = client.post('/auth/register', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1150: in open\n    response = self.resolve_redirect(response, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1056: in resolve_redirect\n    return self.open(builder, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\dashboard.py:83: in index\n    return render_template('dashboard/index.html', predict_form=PredictionForm())\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.dashboard:Error loading dashboard for user 1: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.dashboard:dashboard.py:81 Error loading dashboard for user 1: block 'content' defined twice\n______________ TestDashboardRoutes.test_dashboard_requires_login ______________\napp\\routes\\dashboard.py:67: in index\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_dashboard_routes.py:15: in test_dashboard_requires_login\n    response = client.get('/dashboard')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\dashboard.py:83: in index\n    return render_template('dashboard/index.html', predict_form=PredictionForm())\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.dashboard:Error loading dashboard for user 1: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.dashboard:dashboard.py:81 Error loading dashboard for user 1: block 'content' defined twice\n____________ TestDashboardRoutes.test_dashboard_page_authenticated ____________\napp\\routes\\dashboard.py:67: in index\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_dashboard_routes.py:21: in test_dashboard_page_authenticated\n    response = authenticated_client.get('/dashboard')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\dashboard.py:83: in index\n    return render_template('dashboard/index.html', predict_form=PredictionForm())\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.dashboard:Error loading dashboard for user 2: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.dashboard:dashboard.py:81 Error loading dashboard for user 2: block 'content' defined twice\n_________ TestDashboardRoutes.test_dashboard_displays_wallet_balance __________\napp\\routes\\dashboard.py:67: in index\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_dashboard_routes.py:27: in test_dashboard_displays_wallet_balance\n    response = authenticated_client.get('/dashboard')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\dashboard.py:83: in index\n    return render_template('dashboard/index.html', predict_form=PredictionForm())\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.dashboard:Error loading dashboard for user 2: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.dashboard:dashboard.py:81 Error loading dashboard for user 2: block 'content' defined twice\n_________ TestDashboardRoutes.test_dashboard_displays_portfolio_value _________\napp\\routes\\dashboard.py:43: in index\n    top_holdings = sorted(holdings, key=lambda h: h.quantity * h.average_purchase_price, reverse=True)[:3] if holdings else []\napp\\routes\\dashboard.py:43: in <lambda>\n    top_holdings = sorted(holdings, key=lambda h: h.quantity * h.average_purchase_price, reverse=True)[:3] if holdings else []\nE   AttributeError: 'dict' object has no attribute 'quantity'\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_dashboard_routes.py:34: in test_dashboard_displays_portfolio_value\n    response = authenticated_client.get('/dashboard')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\dashboard.py:83: in index\n    return render_template('dashboard/index.html', predict_form=PredictionForm())\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.dashboard:Error loading dashboard for user 2: 'dict' object has no attribute 'quantity'\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.dashboard:dashboard.py:81 Error loading dashboard for user 2: 'dict' object has no attribute 'quantity'\n_______________ TestDashboardRoutes.test_predict_requires_login _______________\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:891: in dispatch_request\n    self.raise_routing_exception(req)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:500: in raise_routing_exception\n    raise request.routing_exception  # type: ignore[misc]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\ctx.py:362: in match_request\n    result = self.url_adapter.match(return_rule=True)  # type: ignore\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\routing\\map.py:629: in match\n    raise NotFound() from None\nE   werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_dashboard_routes.py:41: in test_predict_requires_login\n    response = client.get('/dashboard/predict')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:802: in handle_user_exception\n    return self.handle_http_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:777: in handle_http_exception\n    return self.ensure_sync(handler)(e)  # type: ignore[no-any-return]\napp\\utils\\error_handlers.py:73: in not_found_error\n    return render_template('errors/404.html'), 404\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\errors\\404.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n_____________ TestDashboardRoutes.test_predict_page_authenticated _____________\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:891: in dispatch_request\n    self.raise_routing_exception(req)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:500: in raise_routing_exception\n    raise request.routing_exception  # type: ignore[misc]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\ctx.py:362: in match_request\n    result = self.url_adapter.match(return_rule=True)  # type: ignore\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\routing\\map.py:629: in match\n    raise NotFound() from None\nE   werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_dashboard_routes.py:47: in test_predict_page_authenticated\n    response = authenticated_client.get('/dashboard/predict')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:802: in handle_user_exception\n    return self.handle_http_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:777: in handle_http_exception\n    return self.ensure_sync(handler)(e)  # type: ignore[no-any-return]\napp\\utils\\error_handlers.py:73: in not_found_error\n    return render_template('errors/404.html'), 404\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\errors\\404.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n_________________ TestDashboardRoutes.test_predict_submission _________________\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:891: in dispatch_request\n    self.raise_routing_exception(req)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:500: in raise_routing_exception\n    raise request.routing_exception  # type: ignore[misc]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\ctx.py:362: in match_request\n    result = self.url_adapter.match(return_rule=True)  # type: ignore\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\routing\\map.py:629: in match\n    raise NotFound() from None\nE   werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_dashboard_routes.py:75: in test_predict_submission\n    response = authenticated_client.post('/dashboard/predict', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:802: in handle_user_exception\n    return self.handle_http_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:777: in handle_http_exception\n    return self.ensure_sync(handler)(e)  # type: ignore[no-any-return]\napp\\utils\\error_handlers.py:73: in not_found_error\n    return render_template('errors/404.html'), 404\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\errors\\404.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n_______________ TestDashboardRoutes.test_predict_invalid_symbol _______________\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:891: in dispatch_request\n    self.raise_routing_exception(req)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:500: in raise_routing_exception\n    raise request.routing_exception  # type: ignore[misc]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\ctx.py:362: in match_request\n    result = self.url_adapter.match(return_rule=True)  # type: ignore\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\routing\\map.py:629: in match\n    raise NotFound() from None\nE   werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_dashboard_routes.py:85: in test_predict_invalid_symbol\n    response = authenticated_client.post('/dashboard/predict', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:802: in handle_user_exception\n    return self.handle_http_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:777: in handle_http_exception\n    return self.ensure_sync(handler)(e)  # type: ignore[no-any-return]\napp\\utils\\error_handlers.py:73: in not_found_error\n    return render_template('errors/404.html'), 404\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\errors\\404.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n__________ TestDashboardRoutes.test_home_page_redirects_to_dashboard __________\napp\\routes\\dashboard.py:67: in index\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_dashboard_routes.py:93: in test_home_page_redirects_to_dashboard\n    response = authenticated_client.get('/')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\dashboard.py:83: in index\n    return render_template('dashboard/index.html', predict_form=PredictionForm())\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.dashboard:Error loading dashboard for user 2: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.dashboard:dashboard.py:81 Error loading dashboard for user 2: block 'content' defined twice\n_________ TestDashboardRoutes.test_home_page_shows_landing_for_guests _________\napp\\routes\\dashboard.py:67: in index\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_dashboard_routes.py:99: in test_home_page_shows_landing_for_guests\n    response = client.get('/')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\dashboard.py:83: in index\n    return render_template('dashboard/index.html', predict_form=PredictionForm())\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\dashboard\\index.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.dashboard:Error loading dashboard for user 1: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.dashboard:dashboard.py:81 Error loading dashboard for user 1: block 'content' defined twice\n_________________ TestOrderRoutes.test_orders_requires_login __________________\ntests\\test_routes\\test_order_routes.py:17: in test_orders_requires_login\n    assert response.status_code in [302, 401]\nE   assert 308 in [302, 401]\nE    +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\n_______________ TestOrderRoutes.test_orders_page_authenticated ________________\ntests\\test_routes\\test_order_routes.py:22: in test_orders_page_authenticated\n    assert response.status_code == 200\nE   assert 308 == 200\nE    +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\n________________ TestOrderRoutes.test_buy_page_requires_login _________________\ntests\\test_routes\\test_order_routes.py:27: in test_buy_page_requires_login\n    response = client.get('/orders/buy')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\orders.py:135: in buy\n    return render_template('orders/buy.html', form=form)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\orders\\buy.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n_________________ TestOrderRoutes.test_buy_page_authenticated _________________\ntests\\test_routes\\test_order_routes.py:33: in test_buy_page_authenticated\n    response = authenticated_client.get('/orders/buy')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\orders.py:135: in buy\n    return render_template('orders/buy.html', form=form)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\orders\\buy.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n________________ TestOrderRoutes.test_sell_page_requires_login ________________\ntests\\test_routes\\test_order_routes.py:39: in test_sell_page_requires_login\n    response = client.get('/orders/sell')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\orders.py:183: in sell\n    return render_template('orders/sell.html', form=form)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\orders\\sell.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n________________ TestOrderRoutes.test_sell_page_authenticated _________________\ntests\\test_routes\\test_order_routes.py:45: in test_sell_page_authenticated\n    response = authenticated_client.get('/orders/sell')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\orders.py:183: in sell\n    return render_template('orders/sell.html', form=form)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\orders\\sell.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n____________ TestOrderRoutes.test_transactions_page_authenticated _____________\napp\\routes\\orders.py:339: in transactions\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\orders\\transactions.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_order_routes.py:51: in test_transactions_page_authenticated\n    response = authenticated_client.get('/orders/transactions')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\orders.py:351: in transactions\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\orders\\transactions.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.orders:Error loading transaction history: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.orders:orders.py:349 Error loading transaction history: block 'content' defined twice\n__________________ TestOrderRoutes.test_buy_order_submission __________________\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1967: in _exec_single_context\n    self.dialect.do_execute(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\default.py:941: in do_execute\n    cursor.execute(statement, parameters)\nE   sqlite3.IntegrityError: UNIQUE constraint failed: price_history.company_id, price_history.date\n\nThe above exception was the direct cause of the following exception:\ntests\\test_routes\\test_order_routes.py:74: in test_buy_order_submission\n    db.session.commit()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\scoping.py:597: in commit\n    return self._proxied.commit()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:2028: in commit\n    trans.commit(_to_root=True)\n<string>:2: in commit\n    ???\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\state_changes.py:139: in _go\n    ret_value = fn(self, *arg, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:1313: in commit\n    self._prepare_impl()\n<string>:2: in _prepare_impl\n    ???\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\state_changes.py:139: in _go\n    ret_value = fn(self, *arg, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:1288: in _prepare_impl\n    self.session.flush()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:4352: in flush\n    self._flush(objects)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:4487: in _flush\n    with util.safe_reraise():\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\util\\langhelpers.py:146: in __exit__\n    raise exc_value.with_traceback(exc_tb)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\session.py:4448: in _flush\n    flush_context.execute()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py:466: in execute\n    rec.execute(self)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py:642: in execute\n    util.preloaded.orm_persistence.save_obj(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\persistence.py:93: in save_obj\n    _emit_insert_statements(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\orm\\persistence.py:1233: in _emit_insert_statements\n    result = connection.execute(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1418: in execute\n    return meth(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\sql\\elements.py:515: in _execute_on_connection\n    return connection._execute_clauseelement(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1640: in _execute_clauseelement\n    ret = self._execute_context(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1846: in _execute_context\n    return self._exec_single_context(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1986: in _exec_single_context\n    self._handle_dbapi_exception(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:2355: in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\base.py:1967: in _exec_single_context\n    self.dialect.do_execute(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\sqlalchemy\\engine\\default.py:941: in do_execute\n    cursor.execute(statement, parameters)\nE   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: price_history.company_id, price_history.date\nE   [SQL: INSERT INTO price_history (company_id, date, open, high, low, close, adjusted_close, volume, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]\nE   [parameters: (6, '2025-11-19', 150.0, 155.0, 148.0, 152.0, 152.0, 1000000, '2025-11-18 19:19:15.962684')]\nE   (Background on this error at: https://sqlalche.me/e/20/gkpj)\n_________________ TestOrderRoutes.test_sell_order_submission __________________\ntests\\test_routes\\test_order_routes.py:85: in test_sell_order_submission\n    response = authenticated_client.post('/orders/sell', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\orders.py:183: in sell\n    return render_template('orders/sell.html', form=form)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\orders\\sell.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nWARNING:app.services.stock_repository:Company not found: TEST\nWARNING:app.utils.error_handlers:create_sell_order validation error: Invalid stock symbol: TEST\n------------------------------ Captured log call ------------------------------\nWARNING  app.services.stock_repository:stock_repository.py:59 Company not found: TEST\nWARNING  app.utils.error_handlers:error_handlers.py:40 create_sell_order validation error: Invalid stock symbol: TEST\n________________ TestOrderRoutes.test_buy_order_invalid_symbol ________________\ntests\\test_routes\\test_order_routes.py:94: in test_buy_order_invalid_symbol\n    response = authenticated_client.post('/orders/buy', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\orders.py:135: in buy\n    return render_template('orders/buy.html', form=form)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\orders\\buy.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nWARNING:app.services.stock_repository:Company not found: INVALID\nERROR:yfinance:429 Client Error: Too Many Requests for url: https://query2.finance.yahoo.com/v10/finance/quoteSummary/INVALID?modules=financialData%2CquoteType%2CdefaultKeyStatistics%2CassetProfile%2CsummaryDetail&corsDomain=finance.yahoo.com&formatted=false&symbol=INVALID&crumb=Edge%3A+Too+Many+Requests\nERROR:app.services.stock_repository:Failed to fetch company info for INVALID: Expecting value: line 1 column 1 (char 0)\nERROR:app.utils.error_handlers:create_company API error: Failed to fetch company information: Expecting value: line 1 column 1 (char 0)\nTraceback (most recent call last):\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\services\\stock_repository.py\", line 135, in _fetch_company_info_from_yfinance\n    info = ticker.info\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\ticker.py\", line 153, in info\n    return self.get_info()\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\base.py\", line 223, in get_info\n    data = self._quote.info\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\scrapers\\quote.py\", line 561, in info\n    self._fetch_complementary(self.proxy)\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\scrapers\\quote.py\", line 721, in _fetch_complementary\n    json_data = json.loads(json_str)\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\json\\__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\json\\decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\json\\decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\utils\\error_handlers.py\", line 36, in wrapper\n    return func(*args, **kwargs)\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\services\\stock_repository.py\", line 96, in create_company\n    data = self._fetch_company_info_from_yfinance(symbol)\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\services\\stock_repository.py\", line 154, in _fetch_company_info_from_yfinance\n    raise ExternalAPIError(f\"Failed to fetch company information: {str(e)}\")\napp.utils.exceptions.ExternalAPIError: Failed to fetch company information: Expecting value: line 1 column 1 (char 0)\nWARNING:app.utils.error_handlers:create_buy_order validation error: Invalid stock symbol: INVALID\n------------------------------ Captured log call ------------------------------\nWARNING  app.services.stock_repository:stock_repository.py:59 Company not found: INVALID\nERROR    yfinance:quote.py:626 429 Client Error: Too Many Requests for url: https://query2.finance.yahoo.com/v10/finance/quoteSummary/INVALID?modules=financialData%2CquoteType%2CdefaultKeyStatistics%2CassetProfile%2CsummaryDetail&corsDomain=finance.yahoo.com&formatted=false&symbol=INVALID&crumb=Edge%3A+Too+Many+Requests\nERROR    app.services.stock_repository:stock_repository.py:153 Failed to fetch company info for INVALID: Expecting value: line 1 column 1 (char 0)\nERROR    app.utils.error_handlers:error_handlers.py:52 create_company API error: Failed to fetch company information: Expecting value: line 1 column 1 (char 0)\nTraceback (most recent call last):\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\services\\stock_repository.py\", line 135, in _fetch_company_info_from_yfinance\n    info = ticker.info\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\ticker.py\", line 153, in info\n    return self.get_info()\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\base.py\", line 223, in get_info\n    data = self._quote.info\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\scrapers\\quote.py\", line 561, in info\n    self._fetch_complementary(self.proxy)\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\yfinance\\scrapers\\quote.py\", line 721, in _fetch_complementary\n    json_data = json.loads(json_str)\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\json\\__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\json\\decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\json\\decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\utils\\error_handlers.py\", line 36, in wrapper\n    return func(*args, **kwargs)\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\services\\stock_repository.py\", line 96, in create_company\n    data = self._fetch_company_info_from_yfinance(symbol)\n  File \"d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\app\\services\\stock_repository.py\", line 154, in _fetch_company_info_from_yfinance\n    raise ExternalAPIError(f\"Failed to fetch company information: {str(e)}\")\napp.utils.exceptions.ExternalAPIError: Failed to fetch company information: Expecting value: line 1 column 1 (char 0)\nWARNING  app.utils.error_handlers:error_handlers.py:40 create_buy_order validation error: Invalid stock symbol: INVALID\n_____________ TestOrderRoutes.test_sell_order_insufficient_shares _____________\ntests\\test_routes\\test_order_routes.py:103: in test_sell_order_insufficient_shares\n    response = authenticated_client.post('/orders/sell', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\orders.py:183: in sell\n    return render_template('orders/sell.html', form=form)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\orders\\sell.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n---------------------------- Captured stderr call -----------------------------\nWARNING:app.services.stock_repository:Company not found: TEST\nWARNING:app.utils.error_handlers:create_sell_order validation error: Invalid stock symbol: TEST\n------------------------------ Captured log call ------------------------------\nWARNING  app.services.stock_repository:stock_repository.py:59 Company not found: TEST\nWARNING  app.utils.error_handlers:error_handlers.py:40 create_sell_order validation error: Invalid stock symbol: TEST\n___________________ TestOrderRoutes.test_order_view_details ___________________\ntests\\test_routes\\test_order_routes.py:131: in test_order_view_details\n    response = authenticated_client.get(f'/orders/{order_id}')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\orders.py:255: in view_order\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\orders\\view.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n______________ TestPortfolioRoutes.test_portfolio_requires_login ______________\ntests\\test_routes\\test_portfolio_routes.py:16: in test_portfolio_requires_login\n    assert response.status_code in [302, 401]\nE   assert 308 in [302, 401]\nE    +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\n____________ TestPortfolioRoutes.test_portfolio_page_authenticated ____________\ntests\\test_routes\\test_portfolio_routes.py:21: in test_portfolio_page_authenticated\n    assert response.status_code == 200\nE   assert 308 == 200\nE    +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\n_____________ TestPortfolioRoutes.test_wallet_page_authenticated ______________\ntests\\test_routes\\test_portfolio_routes.py:33: in test_wallet_page_authenticated\n    assert response.status_code == 200\nE   assert 302 == 200\nE    +  where 302 = <WrapperTestResponse streamed [302 FOUND]>.status_code\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.portfolio:Error loading wallet for user 2: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.portfolio:portfolio.py:101 Error loading wallet for user 2: block 'content' defined twice\n___________________ TestPortfolioRoutes.test_deposit_funds ____________________\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:891: in dispatch_request\n    self.raise_routing_exception(req)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:500: in raise_routing_exception\n    raise request.routing_exception  # type: ignore[misc]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\ctx.py:362: in match_request\n    result = self.url_adapter.match(return_rule=True)  # type: ignore\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\routing\\map.py:629: in match\n    raise NotFound() from None\nE   werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_portfolio_routes.py:38: in test_deposit_funds\n    response = authenticated_client.post('/portfolio/wallet/deposit', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:802: in handle_user_exception\n    return self.handle_http_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:777: in handle_http_exception\n    return self.ensure_sync(handler)(e)  # type: ignore[no-any-return]\napp\\utils\\error_handlers.py:73: in not_found_error\n    return render_template('errors/404.html'), 404\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\errors\\404.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n___________________ TestPortfolioRoutes.test_withdraw_funds ___________________\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:891: in dispatch_request\n    self.raise_routing_exception(req)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:500: in raise_routing_exception\n    raise request.routing_exception  # type: ignore[misc]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\ctx.py:362: in match_request\n    result = self.url_adapter.match(return_rule=True)  # type: ignore\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\routing\\map.py:629: in match\n    raise NotFound() from None\nE   werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_portfolio_routes.py:47: in test_withdraw_funds\n    response = authenticated_client.post('/portfolio/wallet/withdraw', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:802: in handle_user_exception\n    return self.handle_http_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:777: in handle_http_exception\n    return self.ensure_sync(handler)(e)  # type: ignore[no-any-return]\napp\\utils\\error_handlers.py:73: in not_found_error\n    return render_template('errors/404.html'), 404\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\errors\\404.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n_______________ TestPortfolioRoutes.test_deposit_invalid_amount _______________\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:891: in dispatch_request\n    self.raise_routing_exception(req)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:500: in raise_routing_exception\n    raise request.routing_exception  # type: ignore[misc]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\ctx.py:362: in match_request\n    result = self.url_adapter.match(return_rule=True)  # type: ignore\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\routing\\map.py:629: in match\n    raise NotFound() from None\nE   werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_portfolio_routes.py:56: in test_deposit_invalid_amount\n    response = authenticated_client.post('/portfolio/wallet/deposit', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:802: in handle_user_exception\n    return self.handle_http_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:777: in handle_http_exception\n    return self.ensure_sync(handler)(e)  # type: ignore[no-any-return]\napp\\utils\\error_handlers.py:73: in not_found_error\n    return render_template('errors/404.html'), 404\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\errors\\404.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n____________ TestPortfolioRoutes.test_withdraw_insufficient_funds _____________\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:891: in dispatch_request\n    self.raise_routing_exception(req)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:500: in raise_routing_exception\n    raise request.routing_exception  # type: ignore[misc]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\ctx.py:362: in match_request\n    result = self.url_adapter.match(return_rule=True)  # type: ignore\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\routing\\map.py:629: in match\n    raise NotFound() from None\nE   werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.\n\nDuring handling of the above exception, another exception occurred:\ntests\\test_routes\\test_portfolio_routes.py:65: in test_withdraw_insufficient_funds\n    response = authenticated_client.post('/portfolio/wallet/withdraw', data={\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1167: in post\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:802: in handle_user_exception\n    return self.handle_http_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:777: in handle_http_exception\n    return self.ensure_sync(handler)(e)  # type: ignore[no-any-return]\napp\\utils\\error_handlers.py:73: in not_found_error\n    return render_template('errors/404.html'), 404\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\errors\\404.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n____________ TestPortfolioRoutes.test_portfolio_displays_holdings _____________\ntests\\test_routes\\test_portfolio_routes.py:75: in test_portfolio_displays_holdings\n    assert response.status_code == 200\nE   assert 308 == 200\nE    +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\n______________ TestPortfolioRoutes.test_wallet_displays_balance _______________\ntests\\test_routes\\test_portfolio_routes.py:82: in test_wallet_displays_balance\n    assert response.status_code == 200\nE   assert 302 == 200\nE    +  where 302 = <WrapperTestResponse streamed [302 FOUND]>.status_code\n---------------------------- Captured stderr call -----------------------------\nERROR:app.routes.portfolio:Error loading wallet for user 2: block 'content' defined twice\n------------------------------ Captured log call ------------------------------\nERROR    app.routes.portfolio:portfolio.py:101 Error loading wallet for user 2: block 'content' defined twice\n________________ TestReportRoutes.test_reports_requires_login _________________\ntests\\test_routes\\test_report_routes.py:16: in test_reports_requires_login\n    assert response.status_code in [302, 401]\nE   assert 308 in [302, 401]\nE    +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\n______________ TestReportRoutes.test_reports_page_authenticated _______________\ntests\\test_routes\\test_report_routes.py:21: in test_reports_page_authenticated\n    assert response.status_code == 200\nE   assert 308 == 200\nE    +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\n___________ TestReportRoutes.test_transaction_report_requires_login ___________\ntests\\test_routes\\test_report_routes.py:26: in test_transaction_report_requires_login\n    response = client.get('/reports/transaction')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\reports.py:73: in transaction_report\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\reports\\transaction.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n___________ TestReportRoutes.test_transaction_report_authenticated ____________\ntests\\test_routes\\test_report_routes.py:32: in test_transaction_report_authenticated\n    response = authenticated_client.get('/reports/transaction')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\reports.py:73: in transaction_report\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\reports\\transaction.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n_____________ TestReportRoutes.test_billing_report_requires_login _____________\ntests\\test_routes\\test_report_routes.py:38: in test_billing_report_requires_login\n    response = client.get('/reports/billing')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\reports.py:101: in billing_report\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\reports\\billing.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n_____________ TestReportRoutes.test_billing_report_authenticated ______________\ntests\\test_routes\\test_report_routes.py:44: in test_billing_report_authenticated\n    response = authenticated_client.get('/reports/billing')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\reports.py:101: in billing_report\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\reports\\billing.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n___________ TestReportRoutes.test_performance_report_requires_login ___________\ntests\\test_routes\\test_report_routes.py:50: in test_performance_report_requires_login\n    response = client.get('/reports/performance')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\reports.py:127: in performance_report\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\reports\\performance.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n___________ TestReportRoutes.test_performance_report_authenticated ____________\ntests\\test_routes\\test_report_routes.py:56: in test_performance_report_authenticated\n    response = authenticated_client.get('/reports/performance')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\reports.py:127: in performance_report\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\reports\\performance.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n__________ TestReportRoutes.test_transaction_report_with_date_range ___________\ntests\\test_routes\\test_report_routes.py:62: in test_transaction_report_with_date_range\n    response = authenticated_client.get('/reports/transaction?start_date=2024-01-01&end_date=2024-12-31')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\reports.py:73: in transaction_report\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\reports\\transaction.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n_______________ TestReportRoutes.test_billing_report_with_month _______________\ntests\\test_routes\\test_report_routes.py:67: in test_billing_report_with_month\n    response = authenticated_client.get('/reports/billing?month=1&year=2024')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\reports.py:101: in billing_report\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\reports\\billing.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n____________ TestReportRoutes.test_performance_report_with_period _____________\ntests\\test_routes\\test_report_routes.py:72: in test_performance_report_with_period\n    response = authenticated_client.get('/reports/performance?period=1y')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\reports.py:127: in performance_report\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\reports\\performance.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n___________________ TestReportRoutes.test_report_export_csv ___________________\ntests\\test_routes\\test_report_routes.py:77: in test_report_export_csv\n    response = authenticated_client.get('/reports/transaction?format=csv')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\reports.py:73: in transaction_report\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\reports\\transaction.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n___________________ TestReportRoutes.test_report_export_pdf ___________________\ntests\\test_routes\\test_report_routes.py:83: in test_report_export_pdf\n    response = authenticated_client.get('/reports/billing?format=pdf')\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1162: in get\n    return self.open(*args, **kw)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\testing.py:234: in open\n    response = super().open(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\werkzeug\\test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask_login\\utils.py:290: in decorated_view\n    return current_app.ensure_sync(func)(*args, **kwargs)\napp\\routes\\reports.py:101: in billing_report\n    return render_template(\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:150: in render_template\n    return _render(app, template, context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\templating.py:131: in _render\n    rv = template.render(context)\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:1295: in render\n    self.environment.handle_exception()\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\reports\\billing.html:1: in top-level template code\n    {% extends \"base.html\" %}\nC:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\jinja2\\environment.py:942: in handle_exception\n    raise rewrite_traceback_stack(source=source)\napp\\templates\\base.html:177: in template\n    {% block content %}{% endblock %}\nE   jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n\n---------- coverage: platform win32, python 3.10.10-final-0 ----------\nName                                   Stmts   Miss Branch BrPart   Cover   Missing\n-----------------------------------------------------------------------------------\napp\\jobs\\scheduler.py                     18     18      2      0   0.00%   5-70\napp\\utils\\logging_config.py               23     23      4      0   0.00%   5-60\napp\\utils\\sql_security.py                  7      7      2      0   0.00%   5-42\napp\\utils\\validators.py                  133    133     82      0   0.00%   5-335\napp\\utils\\visualization.py               201    177     26      0  10.57%   32-37, 50-56, 69-88, 107-133, 152-178, 197-224, 245-271, 290-321, 344-385, 394-412, 427-429\napp\\services\\dividend_manager.py         106     90     22      0  12.50%   31-58, 62-79, 83-99, 103-109, 113-127, 136-214\napp\\routes\\dashboard.py                  226    180     96      1  14.60%   59-62, 94-213, 223-292, 305-362, 380-422\napp\\services\\sentiment_engine.py         175    138     50      3  17.78%   38, 51, 55, 61-78, 87, 103-147, 160-174, 186-222, 238-290, 302-326, 336-369, 382-391, 411-428\napp\\cli_commands.py                      187    144     40      0  18.94%   26-42, 59-185, 197-205, 217-225, 237-245, 257-277, 292-322\napp\\services\\admin_service.py            550    405    164      9  21.57%   63-82, 99-101, 117, 128-133, 199-203, 217-300, 317, 320, 350-356, 369-411, 424-460, 475-550, 576-589, 606-608, 626-682, 696-738, 751-777, 790-838, 859-860, 867-869, 887-928, 942-970, 983-1003, 1017-1040, 1093-1098, 1144-1146, 1166-1203, 1245-1247, 1274-1281, 1298-1300\napp\\services\\prediction_service.py       192    143     54      5  21.95%   65-67, 81-86, 104-108, 130, 135, 145-232, 235, 238-240, 260-376\napp\\routes\\notifications.py               66     47     12      0  24.36%   20-66, 85-89, 98-102, 111-122, 131-143\napp\\routes\\reports.py                    158    115     30      3  24.47%   20-22, 29-38, 54-71, 88-99, 116-125, 138-188, 195-248, 255-312\napp\\utils\\xss_protection.py               48     27     16      1  34.38%   23-46, 62-66, 79-96, 112, 233\napp\\services\\report_service.py           182    103     86     13  36.57%   37, 42->45, 67-70, 86-87, 89-90, 93-98, 138, 164-169, 178-188, 239-334, 367-403, 423->425, 425->428, 450-452, 465\napp\\utils\\decorators.py                   33     19     10      1  39.53%   18-24, 41-42, 63-74\napp\\routes\\orders.py                     214    122     54      8  39.55%   40-42, 50-88, 117-123, 126, 129-133, 157-171, 174, 177-181, 190-236, 249-250, 278, 280, 282-285, 287-290, 312, 314, 316, 372-443\napp\\services\\audit_service.py             63     33     16      2  40.51%   36->40, 61-65, 91-107, 124-126, 140-150, 164-178\napp\\services\\portfolio_service.py        134     73     26      3  41.25%   39, 60, 66, 93-96, 116-162, 237-251, 314-348, 377-410\napp\\services\\stock_repository.py         261    143     90     15  41.31%   51, 80, 87-92, 99-118, 137-140, 171-190, 226->229, 230, 233, 281, 322, 333->338, 351-353, 376-403, 425, 458-514, 519-544, 560-594, 609, 636-659\napp\\services\\auth_service.py             140     71     48     12  44.15%   39-40, 44-45, 50-51, 76-79, 94-95, 102-103, 148, 165-196, 214-244, 258, 276, 279, 282, 286, 290, 294, 309, 323\napp\\routes\\admin.py                      517    276     76     21  44.18%   32-69, 91, 94, 97-98, 100-101, 128-162, 172-214, 222-238, 246-265, 293, 295, 297, 336-337, 352-372, 388-392, 402-413, 421-440, 448-462, 484, 486, 488, 526-546, 559-582, 592-606, 614-651, 668, 691-711, 726-750, 758-772, 816-853, 863-868, 876-897, 913, 915, 917, 919, 921, 955-971\napp\\routes\\portfolio.py                   61     34      4      2  44.62%   20-31, 48-65, 69-88, 98-99\napp\\forms\\dividend_forms.py               21      6      8      0  51.72%   63-65, 69-71\napp\\utils\\rate_limiter.py                 51     19     10      1  54.10%   53-56, 78-81, 112-131\napp\\services\\notification_service.py     117     50     26      8  55.24%   45, 50, 68-71, 103, 104->107, 111-113, 131-133, 148-149, 151->157, 159-162, 183->192, 194-197, 212-213, 220-223, 235-256, 275-288\napp\\utils\\error_handlers.py               51     19      4      0  58.18%   44-49, 54-57, 83-86, 91-101\napp\\routes\\auth.py                        99     43     26      7  58.40%   33, 40-43, 63-66, 77-87, 96-103, 126-152, 156-169, 180-183\napp\\models\\job_log.py                     25     10      0      0  60.00%   27-32, 37-40\napp\\services\\transaction_engine.py       230     70     64     17  63.61%   71, 74, 79, 83, 93, 96, 118, 123, 136, 175-177, 203-206, 217-226, 253, 257, 337-338, 367-369, 412-418, 447, 455, 459, 481, 529-530, 553-584, 611-622\napp\\forms\\auth_forms.py                   44     10     14      3  67.24%   46, 50, 54, 133-145\napp\\routes\\api.py                        213     65     32      5  70.61%   44-51, 88, 90, 112-118, 142-144, 196-198, 225-229, 236-238, 268-311, 330-355, 379-381, 440-442, 485-487, 513-515, 558-560\napp\\forms\\order_forms.py                  26      2      4      2  86.67%   36, 66\napp\\models\\audit_log.py                   17      1      0      0  94.12%   59\napp\\forms\\portfolio_forms.py              11      0      0      0 100.00%\napp\\forms\\prediction_forms.py             12      0      0      0 100.00%\napp\\forms\\report_forms.py                 16      0      0      0 100.00%\napp\\jobs\\dividend_processor.py             0      0      0      0 100.00%\napp\\jobs\\price_updater.py                  0      0      0      0 100.00%\napp\\models\\broker.py                      13      0      0      0 100.00%\napp\\models\\company.py                     23      0      0      0 100.00%\napp\\models\\dividend.py                    25      0      0      0 100.00%\napp\\models\\holding.py                     14      0      0      0 100.00%\napp\\models\\notification.py                12      0      0      0 100.00%\napp\\models\\order.py                       19      0      0      0 100.00%\napp\\models\\price_history.py               15      0      0      0 100.00%\napp\\models\\sentiment_cache.py             14      0      0      0 100.00%\napp\\models\\transaction.py                 14      0      0      0 100.00%\napp\\models\\user.py                        33      0      0      0 100.00%\napp\\models\\wallet.py                      13      0      0      0 100.00%\napp\\utils\\exceptions.py                   12      0      0      0 100.00%\napp\\utils\\retry_helper.py                  0      0      0      0 100.00%\n-----------------------------------------------------------------------------------\nTOTAL                                   4835   2816   1198    142  37.08%\nCoverage HTML written to dir htmlcov\nCoverage XML written to file coverage.xml\n\nFAIL Required test coverage of 85% not reached. Total coverage: 37.08%\n=========================== short test summary info ===========================\nFAILED tests/test_integration/test_user_workflows.py::TestCompleteUserWorkflows::test_login_reports_export_workflow - AttributeError: 'Transaction' object has no attribute 'quantity'\nFAILED tests/test_integration/test_user_workflows.py::TestAdminWorkflows::test_admin_login_manage_users_dividend_monitoring_workflow - TypeError: AdminService.get_all_users() got an unexpected keyword argument 'pagination'\nFAILED tests/test_integration/test_user_workflows.py::TestErrorScenarios::test_insufficient_funds_workflow - AssertionError: assert 'COMPLETED' == 'FAILED'\n  \n  - FAILED\n  + COMPLETED\nFAILED tests/test_integration/test_user_workflows.py::TestErrorScenarios::test_insufficient_shares_workflow - app.utils.exceptions.ValidationError: You do not own any shares of TST983D9\nFAILED tests/test_integration/test_user_workflows.py::TestErrorScenarios::test_invalid_stock_symbol_workflow - app.utils.exceptions.ValidationError: Invalid stock symbol: INVALID_SYMBOL_XYZ\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_requires_login - assert 308 in [302, 401]\n +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_requires_admin_role - assert 308 in [302, 403]\n +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_page_for_admin - assert 308 == 200\n +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_users_page - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_companies_page - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_brokers_page - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_dividends_page - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_monitoring_page - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_user_view - assert 302 == 200\n +  where 302 = <WrapperTestResponse streamed [302 FOUND]>.status_code\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_user_edit - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_user_suspend - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_company_create_page - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_company_edit_page - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_broker_create_page - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_dividend_create_page - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_admin_audit_logs - assert 302 in [200, 404]\n +  where 302 = <WrapperTestResponse streamed [302 FOUND]>.status_code\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_non_admin_cannot_access_user_management - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_non_admin_cannot_access_company_management - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_admin_routes.py::TestAdminRoutes::test_non_admin_cannot_suspend_users - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_get_stock_details_authenticated - assert 404 == 200\n +  where 404 = <WrapperTestResponse streamed [404 NOT FOUND]>.status_code\nFAILED tests/test_routes/test_api_routes.py::TestStockAPIRoutes::test_get_stock_price_authenticated - sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: price_history.company_id, price_history.date\n[SQL: INSERT INTO price_history (company_id, date, open, high, low, close, adjusted_close, volume, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]\n[parameters: (6, '2025-11-19', 150.0, 155.0, 148.0, 152.0, 152.0, 1000000, '2025-11-18 19:18:42.273117')]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)\nFAILED tests/test_routes/test_api_routes.py::TestAPIErrorResponses::test_api_handles_missing_required_parameters - assert 308 == 404\n +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\nFAILED tests/test_routes/test_auth_routes.py::TestAuthRoutes::test_register_page_loads - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_auth_routes.py::TestAuthRoutes::test_login_page_loads - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_auth_routes.py::TestAuthRoutes::test_register_user_success - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_auth_routes.py::TestAuthRoutes::test_register_duplicate_email - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_auth_routes.py::TestAuthRoutes::test_login_success - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_auth_routes.py::TestAuthRoutes::test_login_wrong_password - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_auth_routes.py::TestAuthRoutes::test_login_nonexistent_user - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_auth_routes.py::TestAuthRoutes::test_logout - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_auth_routes.py::TestAuthRoutes::test_profile_requires_login - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_auth_routes.py::TestAuthRoutes::test_profile_page_authenticated - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_auth_routes.py::TestAuthRoutes::test_update_profile - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_auth_routes.py::TestAuthRoutes::test_register_password_mismatch - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_auth_routes.py::TestAuthRoutes::test_register_weak_password - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_auth_routes.py::TestAuthRoutes::test_register_invalid_email - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_dashboard_requires_login - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_dashboard_page_authenticated - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_dashboard_displays_wallet_balance - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_dashboard_displays_portfolio_value - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_predict_requires_login - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_predict_page_authenticated - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_predict_submission - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_predict_invalid_symbol - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_home_page_redirects_to_dashboard - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_dashboard_routes.py::TestDashboardRoutes::test_home_page_shows_landing_for_guests - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_order_routes.py::TestOrderRoutes::test_orders_requires_login - assert 308 in [302, 401]\n +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\nFAILED tests/test_routes/test_order_routes.py::TestOrderRoutes::test_orders_page_authenticated - assert 308 == 200\n +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\nFAILED tests/test_routes/test_order_routes.py::TestOrderRoutes::test_buy_page_requires_login - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_order_routes.py::TestOrderRoutes::test_buy_page_authenticated - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_order_routes.py::TestOrderRoutes::test_sell_page_requires_login - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_order_routes.py::TestOrderRoutes::test_sell_page_authenticated - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_order_routes.py::TestOrderRoutes::test_transactions_page_authenticated - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_order_routes.py::TestOrderRoutes::test_buy_order_submission - sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: price_history.company_id, price_history.date\n[SQL: INSERT INTO price_history (company_id, date, open, high, low, close, adjusted_close, volume, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]\n[parameters: (6, '2025-11-19', 150.0, 155.0, 148.0, 152.0, 152.0, 1000000, '2025-11-18 19:19:15.962684')]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)\nFAILED tests/test_routes/test_order_routes.py::TestOrderRoutes::test_sell_order_submission - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_order_routes.py::TestOrderRoutes::test_buy_order_invalid_symbol - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_order_routes.py::TestOrderRoutes::test_sell_order_insufficient_shares - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_order_routes.py::TestOrderRoutes::test_order_view_details - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_portfolio_requires_login - assert 308 in [302, 401]\n +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\nFAILED tests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_portfolio_page_authenticated - assert 308 == 200\n +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\nFAILED tests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_wallet_page_authenticated - assert 302 == 200\n +  where 302 = <WrapperTestResponse streamed [302 FOUND]>.status_code\nFAILED tests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_deposit_funds - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_withdraw_funds - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_deposit_invalid_amount - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_withdraw_insufficient_funds - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_portfolio_displays_holdings - assert 308 == 200\n +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\nFAILED tests/test_routes/test_portfolio_routes.py::TestPortfolioRoutes::test_wallet_displays_balance - assert 302 == 200\n +  where 302 = <WrapperTestResponse streamed [302 FOUND]>.status_code\nFAILED tests/test_routes/test_report_routes.py::TestReportRoutes::test_reports_requires_login - assert 308 in [302, 401]\n +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\nFAILED tests/test_routes/test_report_routes.py::TestReportRoutes::test_reports_page_authenticated - assert 308 == 200\n +  where 308 = <WrapperTestResponse streamed [308 PERMANENT REDIRECT]>.status_code\nFAILED tests/test_routes/test_report_routes.py::TestReportRoutes::test_transaction_report_requires_login - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_report_routes.py::TestReportRoutes::test_transaction_report_authenticated - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_report_routes.py::TestReportRoutes::test_billing_report_requires_login - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_report_routes.py::TestReportRoutes::test_billing_report_authenticated - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_report_routes.py::TestReportRoutes::test_performance_report_requires_login - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_report_routes.py::TestReportRoutes::test_performance_report_authenticated - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_report_routes.py::TestReportRoutes::test_transaction_report_with_date_range - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_report_routes.py::TestReportRoutes::test_billing_report_with_month - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_report_routes.py::TestReportRoutes::test_performance_report_with_period - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_report_routes.py::TestReportRoutes::test_report_export_csv - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\nFAILED tests/test_routes/test_report_routes.py::TestReportRoutes::test_report_export_pdf - jinja2.exceptions.TemplateAssertionError: block 'content' defined twice\n================== 85 failed, 38 passed in 98.42s (0:01:38) ===================\n"
    },
    "smoke_tests": {
      "status": "FAILED",
      "output": "============================================================\nRUNNING SMOKE TESTS\n============================================================\nStarted at: 2025-11-19 00:49:45\n\n============================= test session starts =============================\nplatform win32 -- Python 3.10.10, pytest-8.3.3, pluggy-1.5.0 -- C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\python.exe\ncachedir: .pytest_cache\nbenchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)\nPyQt6 6.9.1 -- Qt runtime 6.9.1 -- Qt compiled 6.9.0\nrootdir: d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\nconfigfile: pytest.ini\nplugins: anyio-4.9.0, dash-3.3.0, logfire-4.4.0, asyncio-1.0.0, benchmark-5.1.0, cov-5.0.0, flask-1.3.0, mock-3.15.1, qt-4.5.0\nasyncio: mode=strict, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollecting ... collected 26 items\n\ntests/test_smoke/test_smoke_suite.py::TestApplicationStartup::test_app_creates_successfully PASSED [  3%]\ntests/test_smoke/test_smoke_suite.py::TestApplicationStartup::test_app_has_required_config PASSED [  7%]\ntests/test_smoke/test_smoke_suite.py::TestApplicationStartup::test_app_blueprints_registered PASSED [ 11%]\ntests/test_smoke/test_smoke_suite.py::TestDatabaseConnection::test_database_connection_works ERROR [ 15%]\n\n=================================== ERRORS ====================================\n___ ERROR at setup of TestDatabaseConnection.test_database_connection_works ___\nfile d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\tests\\test_smoke\\test_smoke_suite.py, line 58\n      def test_database_connection_works(self, app, db):\nE       fixture 'db' not found\n>       available fixtures: _class_event_loop, _configure_application, _function_event_loop, _module_event_loop, _monkeypatch_response_class, _package_event_loop, _push_request_context, _session_event_loop, accept_any, accept_json, accept_jsonp, accept_mimetype, admin_client, admin_user, anyio_backend, anyio_backend_name, anyio_backend_options, app, authenticated_client, benchmark, benchmark_weave, cache, capfd, capfdbinary, capfire, caplog, capsys, capsysbinary, class_mocker, client, client_class, config, cov, dash_br, dash_duo, dash_duo_mp, dash_multi_process_server, dash_process_server, dash_thread_server, dashjl, dashjl_server, dashr, dashr_server, db_session, diskcache_manager, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, live_server, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, qapp, qapp_args, qapp_cls, qtbot, qtlog, qtmodeltester, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, test_admin, test_company, test_holding, test_user, test_wallet, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory\n>       use 'pytest --fixtures [testpath]' for help on them.\n\nd:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\tests\\test_smoke\\test_smoke_suite.py:58\n\n---------- coverage: platform win32, python 3.10.10-final-0 ----------\nName                                   Stmts   Miss Branch BrPart   Cover   Missing\n-----------------------------------------------------------------------------------\napp\\jobs\\scheduler.py                     18     18      2      0   0.00%   5-70\napp\\utils\\logging_config.py               23     23      4      0   0.00%   5-60\napp\\utils\\sql_security.py                  7      7      2      0   0.00%   5-42\napp\\utils\\validators.py                  133    133     82      0   0.00%   5-335\napp\\services\\report_service.py           182    165     86      0   6.34%   21, 36-118, 136-195, 239-334, 367-403, 417-465\napp\\services\\prediction_service.py       192    172     54      0   8.13%   28-39, 52-91, 104-108, 127-240, 260-376\napp\\routes\\dashboard.py                  226    199     96      0   8.39%   31-83, 94-213, 223-292, 305-362, 380-422\napp\\services\\admin_service.py            550    485    164      0   9.10%   58-101, 114-203, 217-300, 314-356, 369-411, 424-460, 475-550, 571-608, 626-682, 696-738, 751-777, 790-838, 854-869, 887-928, 942-970, 983-1003, 1017-1040, 1052-1146, 1166-1203, 1213-1247, 1266-1300\napp\\utils\\visualization.py               201    177     26      0  10.57%   32-37, 50-56, 69-88, 107-133, 152-178, 197-224, 245-271, 290-321, 344-385, 394-412, 427-429\napp\\services\\sentiment_engine.py         175    151     50      0  10.67%   25-40, 50-57, 61-78, 87, 103-147, 160-174, 186-222, 238-290, 302-326, 336-369, 382-391, 411-428\napp\\services\\transaction_engine.py       230    196     64      0  11.56%   38-39, 51-53, 70-101, 117-142, 161-226, 251-338, 357-418, 445-530, 553-584, 607-637\napp\\services\\notification_service.py     117    100     26      0  11.89%   41-71, 92-113, 125-133, 145-162, 174-197, 209-223, 235-256, 275-288\napp\\services\\dividend_manager.py         106     90     22      0  12.50%   31-58, 62-79, 83-99, 103-109, 113-127, 136-214\napp\\services\\stock_repository.py         261    217     90      0  12.54%   35-37, 50-61, 79-118, 133-154, 171-190, 213-246, 260-290, 299-304, 321-353, 357, 376-403, 423-441, 458-514, 518-544, 560-594, 606-611, 636-659\napp\\routes\\auth.py                        99     83     26      0  12.80%   18-45, 52-105, 112-114, 121-185\napp\\routes\\orders.py                     214    177     54      0  13.81%   33-35, 40-42, 50-88, 102-135, 142-183, 190-236, 243-255, 266-351, 372-443\napp\\services\\portfolio_service.py        134    111     26      0  14.38%   37-40, 59-96, 116-162, 174-211, 223-225, 237-251, 266-291, 314-348, 377-410\napp\\utils\\xss_protection.py               48     38     16      0  15.62%   23-46, 62-66, 79-96, 112, 193-207, 222-253\napp\\routes\\reports.py                    158    127     30      0  16.49%   20-22, 29-38, 50-73, 84-101, 112-127, 138-188, 195-248, 255-312\napp\\services\\auth_service.py             140    109     48      0  16.49%   35-79, 93-113, 127, 137-138, 148, 165-196, 214-244, 257-262, 275-296, 309, 323\napp\\cli_commands.py                      187    144     40      0  18.94%   26-42, 59-185, 197-205, 217-225, 237-245, 257-277, 292-322\napp\\services\\audit_service.py             63     48     16      0  18.99%   33-65, 86-126, 140-150, 164-178\napp\\routes\\api.py                        213    164     32      0  20.00%   23-51, 74-144, 164-198, 217-238, 257-311, 330-355, 370-381, 403-442, 460-487, 502-515, 533-560\napp\\utils\\decorators.py                   33     24     10      0  20.93%   18-24, 40-48, 63-74\napp\\routes\\portfolio.py                   61     47      4      0  21.54%   20-31, 38-103\napp\\routes\\admin.py                      517    388     76      0  21.75%   32-69, 79-110, 125-164, 172-214, 222-238, 246-265, 282-319, 327-341, 349-374, 382-394, 402-413, 421-440, 448-462, 473-517, 525-548, 556-584, 592-606, 614-651, 661-682, 690-718, 726-750, 758-772, 782-808, 816-853, 863-868, 876-897, 907-947, 955-971\napp\\routes\\notifications.py               66     47     12      0  24.36%   20-66, 85-89, 98-102, 111-122, 131-143\napp\\utils\\rate_limiter.py                 51     36     10      0  24.59%   39-58, 67-69, 78-81, 93-105, 112-131\napp\\utils\\error_handlers.py               51     30      4      0  38.18%   35-57, 73, 78, 83-86, 91-101\napp\\forms\\auth_forms.py                   44     16     14      0  48.28%   37-38, 42-54, 133-145\napp\\forms\\dividend_forms.py               21      6      8      0  51.72%   63-65, 69-71\napp\\forms\\order_forms.py                  26      8      4      0  60.00%   34-37, 64-67\napp\\models\\job_log.py                     25     10      0      0  60.00%   27-32, 37-40\napp\\models\\user.py                        33      5      0      0  84.85%   45-46, 50-51, 55\napp\\models\\audit_log.py                   17      1      0      0  94.12%   59\napp\\forms\\portfolio_forms.py              11      0      0      0 100.00%\napp\\forms\\prediction_forms.py             12      0      0      0 100.00%\napp\\forms\\report_forms.py                 16      0      0      0 100.00%\napp\\jobs\\dividend_processor.py             0      0      0      0 100.00%\napp\\jobs\\price_updater.py                  0      0      0      0 100.00%\napp\\models\\broker.py                      13      0      0      0 100.00%\napp\\models\\company.py                     23      0      0      0 100.00%\napp\\models\\dividend.py                    25      0      0      0 100.00%\napp\\models\\holding.py                     14      0      0      0 100.00%\napp\\models\\notification.py                12      0      0      0 100.00%\napp\\models\\order.py                       19      0      0      0 100.00%\napp\\models\\price_history.py               15      0      0      0 100.00%\napp\\models\\sentiment_cache.py             14      0      0      0 100.00%\napp\\models\\transaction.py                 14      0      0      0 100.00%\napp\\models\\wallet.py                      13      0      0      0 100.00%\napp\\utils\\exceptions.py                   12      0      0      0 100.00%\napp\\utils\\retry_helper.py                  0      0      0      0 100.00%\n-----------------------------------------------------------------------------------\nTOTAL                                   4835   3752   1198      0  17.95%\nCoverage HTML written to dir htmlcov\nCoverage XML written to file coverage.xml\n\nFAIL Required test coverage of 85% not reached. Total coverage: 17.95%\n=========================== short test summary info ===========================\nERROR tests/test_smoke/test_smoke_suite.py::TestDatabaseConnection::test_database_connection_works\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!\n========================= 3 passed, 1 error in 5.61s ==========================\n\n============================================================\nSmoke tests completed in 16.26 seconds\n"
    },
    "regression_tests": {
      "status": "FAILED",
      "output": "======================================================================\nREGRESSION TEST SUITE RUNNER\n======================================================================\nStarted at: 2025-11-19 00:50:03\nRunning: all test suite(s)\n======================================================================\n\n======================================================================\nRUNNING SMOKE TESTS\n======================================================================\nTarget: < 2 minutes\n\n============================= test session starts =============================\nplatform win32 -- Python 3.10.10, pytest-8.3.3, pluggy-1.5.0 -- C:\\Users\\zombo\\AppData\\Local\\Programs\\Python\\Python310\\python.exe\ncachedir: .pytest_cache\nbenchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)\nPyQt6 6.9.1 -- Qt runtime 6.9.1 -- Qt compiled 6.9.0\nrootdir: d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\nconfigfile: pytest.ini\nplugins: anyio-4.9.0, dash-3.3.0, logfire-4.4.0, asyncio-1.0.0, benchmark-5.1.0, cov-5.0.0, flask-1.3.0, mock-3.15.1, qt-4.5.0\nasyncio: mode=strict, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollecting ... collected 26 items\n\ntests/test_smoke/test_smoke_suite.py::TestApplicationStartup::test_app_creates_successfully PASSED [  3%]\ntests/test_smoke/test_smoke_suite.py::TestApplicationStartup::test_app_has_required_config PASSED [  7%]\ntests/test_smoke/test_smoke_suite.py::TestApplicationStartup::test_app_blueprints_registered PASSED [ 11%]\ntests/test_smoke/test_smoke_suite.py::TestDatabaseConnection::test_database_connection_works ERROR [ 15%]\n\n=================================== ERRORS ====================================\n___ ERROR at setup of TestDatabaseConnection.test_database_connection_works ___\nfile d:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\tests\\test_smoke\\test_smoke_suite.py, line 58\n      def test_database_connection_works(self, app, db):\nE       fixture 'db' not found\n>       available fixtures: _class_event_loop, _configure_application, _function_event_loop, _module_event_loop, _monkeypatch_response_class, _package_event_loop, _push_request_context, _session_event_loop, accept_any, accept_json, accept_jsonp, accept_mimetype, admin_client, admin_user, anyio_backend, anyio_backend_name, anyio_backend_options, app, authenticated_client, benchmark, benchmark_weave, cache, capfd, capfdbinary, capfire, caplog, capsys, capsysbinary, class_mocker, client, client_class, config, cov, dash_br, dash_duo, dash_duo_mp, dash_multi_process_server, dash_process_server, dash_thread_server, dashjl, dashjl_server, dashr, dashr_server, db_session, diskcache_manager, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, live_server, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, qapp, qapp_args, qapp_cls, qtbot, qtlog, qtmodeltester, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, test_admin, test_company, test_holding, test_user, test_wallet, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory\n>       use 'pytest --fixtures [testpath]' for help on them.\n\nd:\\projIII\\Stock-Market-Prediction-Web-App-using-Machine-Learning-And-Sentiment-Analysis\\tests\\test_smoke\\test_smoke_suite.py:58\n\n---------- coverage: platform win32, python 3.10.10-final-0 ----------\nName                                   Stmts   Miss Branch BrPart   Cover   Missing\n-----------------------------------------------------------------------------------\napp\\jobs\\scheduler.py                     18     18      2      0   0.00%   5-70\napp\\utils\\logging_config.py               23     23      4      0   0.00%   5-60\napp\\utils\\sql_security.py                  7      7      2      0   0.00%   5-42\napp\\utils\\validators.py                  133    133     82      0   0.00%   5-335\napp\\services\\report_service.py           182    165     86      0   6.34%   21, 36-118, 136-195, 239-334, 367-403, 417-465\napp\\services\\prediction_service.py       192    172     54      0   8.13%   28-39, 52-91, 104-108, 127-240, 260-376\napp\\routes\\dashboard.py                  226    199     96      0   8.39%   31-83, 94-213, 223-292, 305-362, 380-422\napp\\services\\admin_service.py            550    485    164      0   9.10%   58-101, 114-203, 217-300, 314-356, 369-411, 424-460, 475-550, 571-608, 626-682, 696-738, 751-777, 790-838, 854-869, 887-928, 942-970, 983-1003, 1017-1040, 1052-1146, 1166-1203, 1213-1247, 1266-1300\napp\\utils\\visualization.py               201    177     26      0  10.57%   32-37, 50-56, 69-88, 107-133, 152-178, 197-224, 245-271, 290-321, 344-385, 394-412, 427-429\napp\\services\\sentiment_engine.py         175    151     50      0  10.67%   25-40, 50-57, 61-78, 87, 103-147, 160-174, 186-222, 238-290, 302-326, 336-369, 382-391, 411-428\napp\\services\\transaction_engine.py       230    196     64      0  11.56%   38-39, 51-53, 70-101, 117-142, 161-226, 251-338, 357-418, 445-530, 553-584, 607-637\napp\\services\\notification_service.py     117    100     26      0  11.89%   41-71, 92-113, 125-133, 145-162, 174-197, 209-223, 235-256, 275-288\napp\\services\\dividend_manager.py         106     90     22      0  12.50%   31-58, 62-79, 83-99, 103-109, 113-127, 136-214\napp\\services\\stock_repository.py         261    217     90      0  12.54%   35-37, 50-61, 79-118, 133-154, 171-190, 213-246, 260-290, 299-304, 321-353, 357, 376-403, 423-441, 458-514, 518-544, 560-594, 606-611, 636-659\napp\\routes\\auth.py                        99     83     26      0  12.80%   18-45, 52-105, 112-114, 121-185\napp\\routes\\orders.py                     214    177     54      0  13.81%   33-35, 40-42, 50-88, 102-135, 142-183, 190-236, 243-255, 266-351, 372-443\napp\\services\\portfolio_service.py        134    111     26      0  14.38%   37-40, 59-96, 116-162, 174-211, 223-225, 237-251, 266-291, 314-348, 377-410\napp\\utils\\xss_protection.py               48     38     16      0  15.62%   23-46, 62-66, 79-96, 112, 193-207, 222-253\napp\\routes\\reports.py                    158    127     30      0  16.49%   20-22, 29-38, 50-73, 84-101, 112-127, 138-188, 195-248, 255-312\napp\\services\\auth_service.py             140    109     48      0  16.49%   35-79, 93-113, 127, 137-138, 148, 165-196, 214-244, 257-262, 275-296, 309, 323\napp\\cli_commands.py                      187    144     40      0  18.94%   26-42, 59-185, 197-205, 217-225, 237-245, 257-277, 292-322\napp\\services\\audit_service.py             63     48     16      0  18.99%   33-65, 86-126, 140-150, 164-178\napp\\routes\\api.py                        213    164     32      0  20.00%   23-51, 74-144, 164-198, 217-238, 257-311, 330-355, 370-381, 403-442, 460-487, 502-515, 533-560\napp\\utils\\decorators.py                   33     24     10      0  20.93%   18-24, 40-48, 63-74\napp\\routes\\portfolio.py                   61     47      4      0  21.54%   20-31, 38-103\napp\\routes\\admin.py                      517    388     76      0  21.75%   32-69, 79-110, 125-164, 172-214, 222-238, 246-265, 282-319, 327-341, 349-374, 382-394, 402-413, 421-440, 448-462, 473-517, 525-548, 556-584, 592-606, 614-651, 661-682, 690-718, 726-750, 758-772, 782-808, 816-853, 863-868, 876-897, 907-947, 955-971\napp\\routes\\notifications.py               66     47     12      0  24.36%   20-66, 85-89, 98-102, 111-122, 131-143\napp\\utils\\rate_limiter.py                 51     36     10      0  24.59%   39-58, 67-69, 78-81, 93-105, 112-131\napp\\utils\\error_handlers.py               51     30      4      0  38.18%   35-57, 73, 78, 83-86, 91-101\napp\\forms\\auth_forms.py                   44     16     14      0  48.28%   37-38, 42-54, 133-145\napp\\forms\\dividend_forms.py               21      6      8      0  51.72%   63-65, 69-71\napp\\forms\\order_forms.py                  26      8      4      0  60.00%   34-37, 64-67\napp\\models\\job_log.py                     25     10      0      0  60.00%   27-32, 37-40\napp\\models\\user.py                        33      5      0      0  84.85%   45-46, 50-51, 55\napp\\models\\audit_log.py                   17      1      0      0  94.12%   59\napp\\forms\\portfolio_forms.py              11      0      0      0 100.00%\napp\\forms\\prediction_forms.py             12      0      0      0 100.00%\napp\\forms\\report_forms.py                 16      0      0      0 100.00%\napp\\jobs\\dividend_processor.py             0      0      0      0 100.00%\napp\\jobs\\price_updater.py                  0      0      0      0 100.00%\napp\\models\\broker.py                      13      0      0      0 100.00%\napp\\models\\company.py                     23      0      0      0 100.00%\napp\\models\\dividend.py                    25      0      0      0 100.00%\napp\\models\\holding.py                     14      0      0      0 100.00%\napp\\models\\notification.py                12      0      0      0 100.00%\napp\\models\\order.py                       19      0      0      0 100.00%\napp\\models\\price_history.py               15      0      0      0 100.00%\napp\\models\\sentiment_cache.py             14      0      0      0 100.00%\napp\\models\\transaction.py                 14      0      0      0 100.00%\napp\\models\\wallet.py                      13      0      0      0 100.00%\napp\\utils\\exceptions.py                   12      0      0      0 100.00%\napp\\utils\\retry_helper.py                  0      0      0      0 100.00%\n-----------------------------------------------------------------------------------\nTOTAL                                   4835   3752   1198      0  17.95%\nCoverage HTML written to dir htmlcov\nCoverage XML written to file coverage.xml\n\nFAIL Required test coverage of 85% not reached. Total coverage: 17.95%\n=========================== short test summary info ===========================\nERROR tests/test_smoke/test_smoke_suite.py::TestDatabaseConnection::test_database_connection_works\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!\n========================= 3 passed, 1 error in 4.27s ==========================\n\nSmoke tests completed in 15.77 seconds\n\n\nError during test execution: 'charmap' codec can't encode characters in position 2-3: character maps to <undefined>\n"
    },
    "security_tests": {
      "status": "FAILED",
      "output": ""
    }
  },
  "overall_status": "FAILED",
  "total_tests": 0,
  "passed_tests": 0,
  "failed_tests": 0,
  "skipped_tests": 0
}